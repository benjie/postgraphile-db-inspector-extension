(function(e){function t(t){for(var a,r,l=t[0],c=t[1],s=t[2],u=0,m=[];u<l.length;u++)r=l[u],i[r]&&m.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},i={app:0},o=[];function r(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e0eaae9a"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=i[e]=[t,a]});t.push(n[2]=a);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=r(e),o=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}i[e]=void 0}};var s=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/pgdbi/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0134":function(e,t,n){"use strict";var a=n("da37"),i=n.n(a);i.a},"015f":function(e,t,n){},"034f":function(e,t,n){"use strict";var a=n("1356"),i=n.n(a);i.a},"065f":function(e,t,n){"use strict";var a=n("9e46"),i=n.n(a);i.a},1356:function(e,t,n){},"2a83":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allEnabledRoles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roleName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"applicableRoles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roleName"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:131}};n.loc.source={body:"query {\n  allEnabledRoles {\n    nodes {\n      roleName\n      applicableRoles {\n        grantee\n        roleName\n      }\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,t)}),e.definitions&&e.definitions.forEach(function(e){a(e,t)})}var i={};(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})})(),e.exports=n},"35d9":function(e,t,n){"use strict";var a=n("b450"),i=n.n(a);i.a},3754:function(e,t,n){},"3b18":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TableById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTyped"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userDefinedTypeName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primaryKeyConstraints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"indices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"indexName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"policies"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"policyName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cmd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"withCheck"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"qual"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"triggers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggerCatalog"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggerSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggerName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"eventManipulation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"eventObjectCatalog"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"eventObjectSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"eventObjectTable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionOrder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionCondition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionStatement"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionOrientation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionTiming"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionReferenceOldTable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionReferenceNewTable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionReferenceOldRow"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionReferenceNewRow"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"triggerFunction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resultDataType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"argumentDataTypes"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"definition"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"roleTableGrants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"privilegeType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGrantable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"withHierarchy"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"roleColumnGrants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"privilegeType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGrantable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"checkConstraints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"constraintSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkClause"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableConstraints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"constraintType"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"uniqueConstraints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"constraintSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"keyColumnUsage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"referentialConstraints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"constraintSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniqueConstraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniqueConstraintSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"matchOption"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateRule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleteRule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referencingColumnUsage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positionInUniqueConstraint"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"referencedColumnUsage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positionInUniqueConstraint"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"tableColumns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dataType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isIdentity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnDefault"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isNullable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"characterMaximumLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"characterOctetLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numericScale"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numericPrecision"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numericPrecisionRadix"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"datetimePrecision"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"intervalType"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:2581}};n.loc.source={body:"query TableById(\n  $id: String!\n){\n  tableById(id: $id) {\n    id\n    tableName\n    tableSchema\n    isTyped\n    userDefinedTypeName\n    primaryKeyConstraints {\n      constraintName\n      tableName\n      tableSchema\n    }\n    indices {\n      tableName\n      tableSchema\n      columnName\n      indexName\n    }\n    policies {\n      tableName\n      schemaName\n      policyName\n      roles\n      cmd\n      withCheck\n      qual\n    }\n    triggers {\n      id\n      triggerCatalog\n      triggerSchema\n      triggerName\n      eventManipulation\n      eventObjectCatalog\n      eventObjectSchema\n      eventObjectTable\n      actionOrder\n      actionCondition\n      actionStatement\n      actionOrientation\n      actionTiming\n      actionReferenceOldTable\n      actionReferenceNewTable\n      actionReferenceOldRow\n      actionReferenceNewRow\n      created\n      triggerFunction {\n        id\n        functionName\n        functionSchema\n        resultDataType\n        argumentDataTypes\n        definition\n      }\n    }\n    roleTableGrants {\n      grantor\n      grantee\n      tableName\n      tableSchema\n      privilegeType\n      isGrantable\n      withHierarchy\n    }\n    roleColumnGrants {\n      grantor\n      grantee\n      tableName\n      tableSchema\n      privilegeType\n      isGrantable\n      columnName\n    }\n    checkConstraints {\n      constraintName\n      constraintSchema\n      checkClause\n      tableConstraints {\n        tableName\n        tableSchema\n        constraintType\n      }\n    }\n    uniqueConstraints {\n      constraintName\n      tableName\n      tableSchema\n      constraintName\n      constraintSchema\n      keyColumnUsage {\n        tableSchema\n        tableName\n        columnName\n      }\n    }\n    referentialConstraints {\n      constraintName\n      constraintSchema\n      uniqueConstraintName\n      uniqueConstraintSchema\n      matchOption\n      updateRule\n      deleteRule\n      referencingColumnUsage {\n        constraintName\n        tableSchema\n        tableName\n        columnName\n        ordinalPosition\n        positionInUniqueConstraint\n      }\n      referencedColumnUsage {\n        constraintName\n        tableSchema\n        tableName\n        columnName\n        ordinalPosition\n        positionInUniqueConstraint\n      }\n    }\n    tableColumns {\n      tableName\n      tableSchema\n      columnName\n      dataType\n      isIdentity\n      ordinalPosition\n      columnDefault\n      isNullable\n      characterMaximumLength\n      characterOctetLength\n      numericScale\n      numericPrecision\n      numericPrecisionRadix\n      datetimePrecision\n      intervalType\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,t)}),e.definitions&&e.definitions.forEach(function(e){a(e,t)})}var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}function r(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,r=new Set,l=new Set;a.forEach(function(e){l.add(e)});while(l.size>0){var c=l;l=new Set,c.forEach(function(e){if(!r.has(e)){r.add(e);var t=i[e]||new Set;t.forEach(function(e){l.add(e)})}})}return r.forEach(function(t){var a=o(e,t);a&&n.definitions.push(a)}),n}(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})})(),e.exports=n,e.exports["TableById"]=r(n,"TableById")},"3b45":function(e,t,n){},"52c4":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FunctionById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"functionById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resultDataType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"argumentDataTypes"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"definition"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:165}};n.loc.source={body:"query FunctionById($id: String!) {\n  functionById(id: $id) {\n    id\n    functionName\n    functionSchema\n    resultDataType\n    argumentDataTypes\n    definition\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,t)}),e.definitions&&e.definitions.forEach(function(e){a(e,t)})}var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}function r(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,r=new Set,l=new Set;a.forEach(function(e){l.add(e)});while(l.size>0){var c=l;l=new Set,c.forEach(function(e){if(!r.has(e)){r.add(e);var t=i[e]||new Set;t.forEach(function(e){l.add(e)})}})}return r.forEach(function(t){var a=o(e,t);a&&n.definitions.push(a)}),n}(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})})(),e.exports=n,e.exports["FunctionById"]=r(n,"FunctionById")},"567d":function(e,t,n){"use strict";(function(e){n("55dd"),n("6b54");var a=n("82cd");t["a"]={name:"FunctionPolicyManager",components:{PolicyDefinition:a["a"]},methods:{saveNewPolicy:function(){try{this.$store.commit("newFunctionPolicy",{name:this.newPolicyName})}catch(e){alert(e.toString()),console.error(e)}this.dialog=!1}},computed:{policies:function(){return this.$store.state.functionPolicies.sort(function(e,t){return e.id<t.id?-1:1})}},data:function(){return{dialog:!1,newPolicyName:"New Function Policy",headers:[{text:"ID",sortable:!1},{text:"Name",sortable:!1}]}},mounted:function(){e.client&&window&&(window.history.scrollRestoration="auto")}}}).call(this,n("4362"))},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=n("bb71");n("da64");a["a"].use(i["a"],{iconfont:"md"});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("v-navigation-drawer",{attrs:{persistent:"","mini-variant":e.miniVariant,clipped:e.clipped,"enable-resize-watcher":"",width:"400",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("project-navigator")],1),n("v-toolbar",{attrs:{app:"","clipped-left":e.clipped}},[n("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("div",[n("v-toolbar-title",{attrs:{selectable:""},domProps:{textContent:e._s(e.title)},on:{click:e.home}})],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return t.stopPropagation(),e.settings(t)}}},[n("v-icon",[e._v("settings")])],1),n("v-btn",{attrs:{color:e.btnColor("home")},on:{click:function(t){return e.navigate("home")}}},[e._v("Home")]),n("v-btn",{attrs:{color:e.btnColor("role-manager")},on:{click:function(t){return e.navigate("role-manager")}}},[e._v("Roles")]),n("v-btn",{attrs:{color:e.btnColor("table-security-manager")},on:{click:function(t){return e.navigate("table-security-manager")}}},[e._v("Table Security")]),n("v-btn",{attrs:{color:e.btnColor("function-security-manager")},on:{click:function(t){return e.navigate("function-security-manager")}}},[e._v("Function Security")]),n("v-btn",{attrs:{color:e.btnColor("search-view")},on:{click:function(t){return e.navigate("search-view")}}},[e._v("Search")]),n("v-spacer"),n("v-spacer"),n("h1",[e._v("←—usable")]),n("h1",[e._v("———")]),n("h1",[e._v("not usable—→")]),n("v-spacer"),n("v-spacer"),n("v-btn",{attrs:{color:e.btnColor("fk-index-manager")},on:{click:function(t){return e.navigate("fk-index-manager")}}},[e._v("Indexes")]),n("v-spacer"),n("v-spacer")],1),n("v-content",[n("v-container",{attrs:{"justify-start":"","ma-0":"","pa-0":""}},[n("router-view")],1)],1),n("v-footer",{attrs:{fixed:e.fixed,app:""}},[n("span",[e._v("© 2017")])])],1)},r=[],l=(n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("schema-navigator")],1)}),c=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[e.schemaFilterOn?e._e():n("schema-tree"),e.schemaFilterOn?n("schema-filter"):e._e()],1)},u=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("v-toolbar",[n("v-btn",{on:{click:e.filterSchemata}},[e._v("Select Schemata")])],1),n("v-treeview",{attrs:{items:e.items,activatable:"",transition:"",active:e.active,hoverable:""},on:{"update:active":function(t){e.active=t}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},m=[],f=(n("28a5"),n("55dd"),{name:"SchemaTree",computed:{managedSchemata:function(){return this.$store.state.managedSchemata}},data:function(){return{active:[],items:[],schemata:[],selected:[],computing:!1}},methods:{filterSchemata:function(){this.$store.commit("filterSchemata")},computeItems:function(){var e=this;this.computing=!0,this.items=this.managedSchemata.map(function(t){return{id:"schema:".concat(t.schemaName),name:t.schemaName,children:e.filterMode?[]:[{id:"tables:".concat(t.schemaName),name:"tables",children:t.schemaTables.sort(function(e,t){return e.name<t.name?-1:1})},{id:"functions:".concat(t.name),name:"functions",children:t.schemaFunctions.sort(function(e,t){return e.name<t.name?-1:1})},{id:"enums:".concat(t.name),name:"enums",children:t.schemaEnums.sort(function(e,t){return e.name<t.name?-1:1}).map(function(e){return{id:e.id,name:e.name,children:e.enumValues.map(function(t){return{id:"ev:".concat(e.name,":").concat(t),name:t}})}})}]}}).sort(function(e,t){return e.name<t.name?-1:1}),this.computing=!1}},watch:{managedSchemata:function(){this.computeItems()},active:function(){var e=this.active[0]||"",t=e.split(":")[0];switch(t){case"table":this.$router.push({name:"table",params:{id:e}});break;case"tables":break;case"function":this.$router.push({name:"function",params:{id:e}});break;default:break}}},mounted:function(){this.computeItems()}}),p=f,v=n("2877"),b=n("6544"),h=n.n(b),g=n("8336"),y=n("a523"),k=n("71d9"),N=n("eb2a"),_=Object(v["a"])(p,d,m,!1,null,null,null),x=_.exports;h()(_,{VBtn:g["a"],VContainer:y["a"],VToolbar:k["a"],VTreeview:N["a"]});var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("v-toolbar",[n("v-btn",{attrs:{disabled:e.applyDisabled},on:{click:e.applyFilter}},[e._v("Use Selected Schemata")])],1),e.computing?n("h1",[e._v("Refreshing Schemata....")]):e._e(),n("v-treeview",{attrs:{items:e.items,transition:"",selectable:!0},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},C=[],T=n("a6c0"),P=n.n(T),D=n("f72c"),O=n.n(D),F={name:"SchemaFilter",computed:{applyDisabled:function(){return 0===this.selected.length}},data:function(){return{items:[],schemata:[],selected:[],selectedSchemata:[],computing:!1}},props:{},methods:{applyFilter:function(){var e=this;this.computing=!0,this.$apollo.query({query:O.a,variables:{schemaNames:this.selected}}).then(function(t){e.$store.commit("setManagedSchemata",t.data.allSchemata.nodes),e.computing=!1}).catch(function(t){console.error(t),e.computing=!1})},computeItems:function(){this.computing=!0;var e=this.$store.state.managedSchemata||[],t=this.schemata;this.items=t.map(function(e){return{id:e.schemaName,name:e.schemaName,children:[]}}),this.selected=e.reduce(function(e,t){return e.concat([t.schemaName])},[]),this.computing=!1}},watch:{},apollo:{init:{query:P.a,update:function(e){this.schemata=e.allSchemata.nodes,this.computeItems()}}}},E=F,j=Object(v["a"])(E,S,C,!1,null,null,null),V=j.exports;h()(j,{VBtn:g["a"],VContainer:y["a"],VToolbar:k["a"],VTreeview:N["a"]});var w={name:"SchemaNavigator",components:{SchemaTree:x,SchemaFilter:V},data:function(){return{}},computed:{schemaFilterOn:function(){return this.$store.state.schemaFilterOn}},watch:{},methods:{}},R=w,I=Object(v["a"])(R,s,u,!1,null,null,null),A=I.exports;h()(I,{VContainer:y["a"]});var G={name:"ProjectNavigator",components:{SchemaNavigator:A}},$=G,q=Object(v["a"])($,l,c,!1,null,null,null),B=q.exports;h()(q,{VContainer:y["a"]});var L={name:"App",components:{ProjectNavigator:B},computed:{currentRoute:function(){return this.$router.currentRoute}},methods:{btnColor:function(e){return this.$router.currentRoute.name===e?"blue":"blue-grey"},home:function(){this.$router.push({name:"home"})},settings:function(){this.$router.push({name:"settings"})},navigate:function(e){this.$router.push({name:e})}},data:function(){return{clipped:!0,drawer:!0,fixed:!1,items:[],miniVariant:!1,right:!0,rightDrawer:!1,title:"pg-db-inspector"}}},U=L,M=(n("034f"),n("7496")),z=n("549c"),Q=n("553a"),H=n("132d"),W=n("f774"),K=n("9910"),X=n("706c"),J=n("2a7f"),Y=Object(v["a"])(U,o,r,!1,null,null,null),Z=Y.exports;h()(Y,{VApp:M["a"],VBtn:g["a"],VContainer:y["a"],VContent:z["a"],VFooter:Q["a"],VIcon:H["a"],VNavigationDrawer:W["a"],VSpacer:K["a"],VToolbar:k["a"],VToolbarSideIcon:X["a"],VToolbarTitle:J["a"]});var ee=n("8c4f"),te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("h1",[e._v("PGDBI")]),n("h2",[e._v("postgraphile-db-inspector")]),n("hr"),n("h2",[e._v("A collection of tools to ensure your postgres database is properly configured to support "),n("a",{attrs:{href:"https://www.graphile.org/postgraphile/",target:"_blank"}},[e._v("postgraphile")])]),n("hr"),n("h2",[e._v("click here if you want to reset the tool")]),n("v-btn",{on:{click:e.resetStore}},[e._v("Reset PGDBI")]),n("h2",[e._v("import/export")]),n("v-btn",{on:{click:function(t){return e.$router.push("project-export")}}},[e._v("Export Project")]),n("v-btn",{on:{click:function(t){return e.$router.push("project-import")}}},[e._v("Import Project")]),n("hr")],1)},ne=[],ae={name:"Home",components:{},props:{},computed:{},data:function(){return{activeTab:null}},methods:{resetStore:function(){this.$store.commit("resetDefaultState"),this.$router.push("initialize")}}},ie=ae,oe=Object(v["a"])(ie,te,ne,!1,null,null,null),re=oe.exports;h()(oe,{VBtn:g["a"],VContainer:y["a"]});var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("h1",[e._v("Select schema to work with in the filter to the left to get started")]),n("h2",[e._v("or...")]),n("project-import")],1)},ce=[],se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"large-12 medium-12 small-12 cell"},[n("label",[e._v("File\n        "),n("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}})])])]),n("h1",[e._v("Import Project: "+e._s(e.projectName))]),n("v-toolbar",[n("v-btn",{on:{click:e.importProject}},[e._v("Import")])],1),n("v-textarea",{attrs:{value:e.projectJson,"auto-grow":"",readonly:""}})],1)},ue=[],de=n("f499"),me=n.n(de),fe={name:"ImportProject",components:{},props:{},computed:{projectName:function(){return this.project?this.project.name:"N/A"},projectJson:function(){return this.project?me()(this.project,null,2):"N/A"}},methods:{importProject:function(){this.$store.commit("importProject",{project:this.project})},useResults:function(e){this.project=JSON.parse(e.currentTarget.result)},handleFileUpload:function(){this.file=this.$refs.file.files[0];var e=new FileReader;e.onload=this.useResults,e.readAsText(this.file)},submitFile:function(){}},data:function(){return this.$store.commit("clearFocus"),{file:"",project:{releases:{nodes:[]}}}}},pe=fe,ve=n("a844"),be=Object(v["a"])(pe,se,ue,!1,null,null,null),he=be.exports;h()(be,{VBtn:g["a"],VTextarea:ve["a"],VToolbar:k["a"]});var ge={name:"Initialize",components:{ProjectImport:he},props:{},computed:{initializing:function(){return this.$store.state.initializing}},data:function(){return{activeTab:null}},watch:{initializing:function(){!0!==this.initializing&&this.$router.push({name:"role-manager"})}},beforeRouteLeave:function(e,t,n){this.initializing?n(!1):n()}},ye=ge,ke=Object(v["a"])(ye,le,ce,!1,null,null,null),Ne=ke.exports;h()(ke,{VContainer:y["a"]});var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v(e._s(e.id))]),n("hr"),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"cols",attrs:{ripple:""}},[e._v("\n      Columns\n    ")]),n("v-tab-item",{key:"cols"},[n("v-card",{attrs:{flat:""}},[n("table-columns",{attrs:{tableColumns:e.tableColumns}})],1)],1),n("v-tab",{key:"constraints",attrs:{ripple:""}},[e._v("\n      Constraints\n    ")]),n("v-tab-item",{key:"constraints"},[n("v-card",{attrs:{flat:""}},[n("table-constraints",{attrs:{tableInfo:e.tableInfo}})],1)],1),n("v-tab",{key:"indices",attrs:{ripple:""}},[e._v("\n      Indices\n    ")]),n("v-tab-item",{key:"indices"},[n("v-card",{attrs:{flat:""}},[n("table-indices",{attrs:{indices:e.indices}})],1)],1),n("v-tab",{key:"tablegrants",attrs:{ripple:""}},[e._v("\n      Table Grants\n    ")]),n("v-tab-item",{key:"tablegrants"},[n("v-card",{attrs:{flat:""}},[n("table-grants",{attrs:{grants:e.tableGrants}})],1)],1),n("v-tab",{key:"tablecolumngrants",attrs:{ripple:""}},[e._v("\n      Column Grants\n    ")]),n("v-tab-item",{key:"tablecolumngrants"},[n("v-card",{attrs:{flat:""}},[n("table-column-grants",{attrs:{grants:e.tableColumnGrants}})],1)],1),n("v-tab",{key:"tablepolicies",attrs:{ripple:""}},[e._v("\n      Policies\n    ")]),n("v-tab-item",{key:"tablepolicies"},[n("v-card",{attrs:{flat:""}},[n("table-policies",{attrs:{policies:e.tablePolicies}})],1)],1),n("v-tab",{key:"tabletriggers",attrs:{ripple:""}},[e._v("\n      Triggers\n    ")]),n("v-tab-item",{key:"tabletriggers"},[n("v-card",{attrs:{flat:""}},[n("table-triggers",{attrs:{triggers:e.tableTriggers}})],1)],1)],1)],1)},xe=[],Se=n("3b18"),Ce=n.n(Se),Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tableColumns,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.ordinalPosition))]),n("td",[e._v(e._s(t.item.columnName))]),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.dataType))]),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.isIdentity))]),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.isNullable))]),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.columnDefault))])]}}])})],1)},Pe=[],De={name:"TableColumns",props:{tableColumns:{type:Array,required:!0}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Ordinal",align:"left",sortable:!0,value:"ordinalPosition"},{text:"Column Name",align:"left",sortable:!0,value:"columnName"},{text:"Data Type",align:"right",sortable:!0,value:"dataType"},{text:"Identity",align:"right",sortable:!0,value:"isIdentity"},{text:"Nullable",align:"right",sortable:!0,value:"isNullable"},{text:"Default Value",align:"right",sortable:!0,value:"columnDefault"}],pagination:{sortBy:"ordinalPosition",rowsPerPage:-1}}}},Oe=De,Fe=n("8fea"),Ee=Object(v["a"])(Oe,Te,Pe,!1,null,null,null),je=Ee.exports;h()(Ee,{VContainer:y["a"],VDataTable:Fe["a"]});var Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.indices,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.tableSchema))]),n("td",[e._v(e._s(t.item.tableName))]),n("td",[e._v(e._s(t.item.columnName))]),n("td",[e._v(e._s(t.item.indexName))])]}}])})],1)},we=[],Re={name:"TableIndicies",props:{indices:{type:Array,required:!0}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Schema",align:"left",sortable:!0,value:"tableSchema"},{text:"Table",align:"left",sortable:!0,value:"tableName"},{text:"Column",align:"left",sortable:!0,value:"columnName"},{text:"Index Name",align:"left",sortable:!0,value:"indexName"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},Ie=Re,Ae=Object(v["a"])(Ie,Ve,we,!1,null,null,null),Ge=Ae.exports;h()(Ae,{VContainer:y["a"],VDataTable:Fe["a"]});var $e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"refcons",attrs:{ripple:""}},[e._v("\n        Referential Constraints\n      ")]),n("v-tab-item",{key:"refcons"},[n("v-card",{attrs:{flat:""}},[n("table-referential-constraints",{attrs:{referentialConstraints:e.referentialConstraints}})],1)],1),n("v-tab",{key:"chk",attrs:{ripple:""}},[e._v("\n        Check Constraints\n      ")]),n("v-tab-item",{key:"chk"},[n("v-card",{attrs:{flat:""}},[n("table-check-constraints",{attrs:{checkConstraints:e.checkConstraints}})],1)],1),n("v-tab",{key:"uq",attrs:{ripple:""}},[e._v("\n        Unique Constraints\n      ")]),n("v-tab-item",{key:"uq"},[n("v-card",{attrs:{flat:""}},[n("table-unique-constraints",{attrs:{uniqueConstraints:e.uniqueConstraints}})],1)],1)],1)],1)},qe=[],Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.mappedConstraints,pagination:e.pagination,"hide-actions":!0,"item-key":"constraintName"},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[n("td",[e._v(e._s(t.item.constraintName)),n("hr"),e._v(e._s(t.item.source))]),n("td",[e._v(e._s(t.item.uniqueConstraintName)),n("hr"),e._v(e._s(t.item.target))]),n("td",[e._v(e._s(t.item.matchOption))]),n("td",[e._v(e._s(t.item.updateRule))]),n("td",[e._v(e._s(t.item.deleteRule))])])]}},{key:"expand",fn:function(t){return[n("v-card",{attrs:{flat:""}},[n("h2",[e._v("Source")]),n("table-key-column-usage",{attrs:{keyColumnUsage:t.item.referencingColumnUsage}})],1),n("v-card",{attrs:{flat:""}},[n("h2",[e._v("Target")]),n("table-key-column-usage",{attrs:{keyColumnUsage:t.item.referencedColumnUsage}})],1)]}}])})],1)},Le=[],Ue=n("cebc"),Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.keyColumnUsage,"hide-actions":!0},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.tableSchema))]),n("td",[e._v(e._s(t.item.tableName))]),n("td",[e._v(e._s(t.item.columnName))])]}}])})],1)},ze=[],Qe={name:"TableKeyColumnUsage",props:{keyColumnUsage:{type:Array,required:!0}},methods:{},data:function(){return{headers:[{text:"Schema",align:"left",sortable:!1,value:"tableSchema"},{text:"Table",align:"left",sortable:!1,value:"tableName"},{text:"Column",align:"left",sortable:!1,value:"columnName"}]}}},He=Qe,We=Object(v["a"])(He,Me,ze,!1,null,null,null),Ke=We.exports;h()(We,{VContainer:y["a"],VDataTable:Fe["a"]});var Xe={name:"TableReferentialConstraints",components:{TableKeyColumnUsage:Ke},props:{referentialConstraints:{type:Array,required:!0}},computed:{mappedConstraints:function(){return this.referentialConstraints.map(function(e){return Object(Ue["a"])({},e,{expanded:!1,source:"".concat(e.referencingColumnUsage[0].tableSchema,".").concat(e.referencingColumnUsage[0].tableName,".").concat(e.referencingColumnUsage[0].columnName),target:"".concat(e.referencedColumnUsage[0].tableSchema,".").concat(e.referencedColumnUsage[0].tableName,".").concat(e.referencedColumnUsage[0].columnName)})})}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Source Constraint",align:"left",sortable:!0,value:"constraintName"},{text:"Target Constraint",align:"left",sortable:!0,value:"uniqueConstraintName"},{text:"On Match",align:"left",sortable:!0,value:"matchOption"},{text:"On Update",align:"left",sortable:!0,value:"updateRule"},{text:"On Delete",align:"left",sortable:!0,value:"deleteRule"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},Je=Xe,Ye=n("b0af"),Ze=Object(v["a"])(Je,Be,Le,!1,null,null,null),et=Ze.exports;h()(Ze,{VCard:Ye["a"],VContainer:y["a"],VDataTable:Fe["a"]});var tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.mappedConstraints,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.constraintSchema))]),n("td",[e._v(e._s(t.item.tableName))]),n("td",[e._v(e._s(t.item.constraintName))]),n("td",[e._v(e._s(t.item.checkClause))])]}}])})],1)},nt=[],at={name:"TableCheckConstraints",props:{checkConstraints:{type:Array,required:!0}},computed:{mappedConstraints:function(){return this.checkConstraints.map(function(e){return Object(Ue["a"])({},e,{expanded:!1,tableName:e.tableConstraints[0].tableName})})}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Schema",align:"left",sortable:!0,value:"constraintSchema"},{text:"Table",align:"left",sortable:!0,value:"tableName"},{text:"Name",align:"left",sortable:!0,value:"constraintName"},{text:"Check Clause",align:"left",sortable:!0,value:"checkClause"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},it=at,ot=Object(v["a"])(it,tt,nt,!1,null,null,null),rt=ot.exports;h()(ot,{VContainer:y["a"],VDataTable:Fe["a"]});var lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.uniqueConstraints,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.constraintSchema))]),n("td",[e._v(e._s(t.item.constraintName))])]}}])})],1)},ct=[],st={name:"TableUniqueConstraints",props:{uniqueConstraints:{type:Array,required:!0}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Schema",align:"left",sortable:!0,value:"constraintSchema"},{text:"Name",align:"left",sortable:!0,value:"constraintName"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},ut=st,dt=Object(v["a"])(ut,lt,ct,!1,null,null,null),mt=dt.exports;h()(dt,{VContainer:y["a"],VDataTable:Fe["a"]});var ft={name:"TableConstraints",components:{TableReferentialConstraints:et,TableCheckConstraints:rt,TableUniqueConstraints:mt},props:{tableInfo:{type:Object,required:!0}},computed:{referentialConstraints:function(){return this.tableInfo.referentialConstraints||[]},checkConstraints:function(){return this.tableInfo.checkConstraints||[]},uniqueConstraints:function(){return this.tableInfo.uniqueConstraints||[]}},methods:{},data:function(){return{activeTab:null}}},pt=ft,vt=n("71a3"),bt=n("c671"),ht=n("fe57"),gt=Object(v["a"])(pt,$e,qe,!1,null,null,null),yt=gt.exports;h()(gt,{VCard:Ye["a"],VContainer:y["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.grants,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.grantee))]),n("td",[e._v(e._s(t.item.privilegeType))])]}}])})],1)},Nt=[],_t={name:"TableGrants",props:{grants:{type:Array,required:!0}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Grantor",align:"left",sortable:!0,value:"grantor"},{text:"Privilege Type",align:"left",sortable:!0,value:"privilegeType"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},xt=_t,St=Object(v["a"])(xt,kt,Nt,!1,null,null,null),Ct=St.exports;h()(St,{VContainer:y["a"],VDataTable:Fe["a"]});var Tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.grants,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.tableSchema))]),n("td",[e._v(e._s(t.item.tableName))]),n("td",[e._v(e._s(t.item.columnName))]),n("td",[e._v(e._s(t.item.grantee))]),n("td",[e._v(e._s(t.item.grantor))]),n("td",[e._v(e._s(t.item.privilegeType))]),n("td",[e._v(e._s(t.item.isGrantable))])]}}])})],1)},Pt=[],Dt={name:"TableGrants",props:{grants:{type:Array,required:!0}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Schema",align:"left",sortable:!0,value:"tableSchema"},{text:"Table",align:"left",sortable:!0,value:"tableName"},{text:"Column",align:"left",sortable:!0,value:"columnName"},{text:"Grantee",align:"left",sortable:!0,value:"grantee"},{text:"Grantor",align:"left",sortable:!0,value:"grantor"},{text:"Privilege Type",align:"left",sortable:!0,value:"privilegeType"},{text:"Is Grantable",align:"left",sortable:!0,value:"isGrantable"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},Ot=Dt,Ft=Object(v["a"])(Ot,Tt,Pt,!1,null,null,null),Et=Ft.exports;h()(Ft,{VContainer:y["a"],VDataTable:Fe["a"]});var jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.policies,pagination:e.pagination,"hide-actions":!0},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.policyName))]),n("td",[e._v(e._s(t.item.roles))]),n("td",[e._v(e._s(t.item.cmd))]),n("td",[e._v(e._s(t.item.qual))]),n("td",[e._v(e._s(t.item.withCheck))])]}}])})],1)},Vt=[],wt={name:"TablePolicies",props:{policies:{type:Array,required:!0}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Policy Name",align:"left",sortable:!0,value:"policyName"},{text:"Roles",align:"left",sortable:!0,value:"roles"},{text:"Cmd",align:"left",sortable:!0,value:"cmd"},{text:"Qual",align:"left",sortable:!0,value:"qual"},{text:"With Check",align:"left",sortable:!0,value:"withCheck"}],pagination:{sortBy:"constraintName",rowsPerPage:-1}}}},Rt=wt,It=Object(v["a"])(Rt,jt,Vt,!1,null,null,null),At=It.exports;h()(It,{VContainer:y["a"],VDataTable:Fe["a"]});var Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.mappedTriggers,pagination:e.pagination,"hide-actions":!0,"item-key":"id"},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[n("td",[e._v(e._s(t.item.triggerName))]),n("td",[e._v(e._s(t.item.eventManipulation))]),n("td",[e._v(e._s(t.item.actionOrientation))]),n("td",[e._v(e._s(t.item.actionTiming))]),n("td",[e._v(e._s(t.item.actionStatement))])])]}},{key:"expand",fn:function(e){return[n("v-card",{attrs:{flat:""}},[n("v-textarea",{attrs:{readonly:"",outline:"",value:e.item.functionDefinition,"auto-grow":""}})],1)]}}])})],1)},$t=[],qt={name:"TableTriggers",props:{triggers:{type:Array,required:!0}},computed:{mappedTriggers:function(){return this.triggers.map(function(e){return Object(Ue["a"])({},e,{expanded:!1,functionDefinition:e.triggerFunction?e.triggerFunction.definition:"N/A"})})}},methods:{changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)}},data:function(){return{headers:[{text:"Name",align:"left",sortable:!0,value:"triggerName"},{text:"Trigger On",align:"left",sortable:!0,value:"eventManipulation"},{text:"Action Orientation",align:"left",sortable:!0,value:"actionOrientation"},{text:"Timing",align:"left",sortable:!0,value:"actionTiming"},{text:"Statement",align:"left",sortable:!0,value:"actionStatement"}],pagination:{sortBy:"triggerName",rowsPerPage:-1}}}},Bt=qt,Lt=Object(v["a"])(Bt,Gt,$t,!1,null,null,null),Ut=Lt.exports;h()(Lt,{VCard:Ye["a"],VContainer:y["a"],VDataTable:Fe["a"],VTextarea:ve["a"]});var Mt={name:"Table",components:{TableColumns:je,TableConstraints:yt,TableIndices:Ge,TableGrants:Ct,TableColumnGrants:Et,TablePolicies:At,TableTriggers:Ut},props:{id:{type:String,required:!0}},computed:{tableName:function(){return this.tableInfo.tableName||"N/A"},tableSchema:function(){return(this.tableInfo.id||"N/A:N/A.N/A").split(":")[1].split(".")[0]},tableColumns:function(){return this.tableInfo.tableColumns||[]},indices:function(){return this.tableInfo.indices||[]},tableGrants:function(){return this.tableInfo.roleTableGrants||[]},tableColumnGrants:function(){return this.tableInfo.roleColumnGrants||[]},tablePolicies:function(){return this.tableInfo.policies||[]},tableTriggers:function(){return this.tableInfo.triggers||[]}},methods:{},data:function(){return{activeTab:null,tableInfo:{}}},apollo:{init:{query:Ce.a,variables:function(){return{id:this.id}},update:function(e){console.log("table",e),this.tableInfo=e.tableById}}}},zt=Mt,Qt=Object(v["a"])(zt,_e,xe,!1,null,null,null),Ht=Qt.exports;h()(Qt,{VCard:Ye["a"],VContainer:y["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v(e._s(e.id))]),n("hr"),n("v-toolbar",[n("v-layout",{attrs:{"align-center":"","align-content-center":"","justify-center":"","justify-content-center":""}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.definition,expression:"definition",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},a),[n("v-icon",[e._v("file_copy")]),e._v("Copy\n        ")],1)]}}])},[n("span",[e._v("Copy")])]),n("v-spacer")],1)],1),n("v-textarea",{attrs:{readonly:"",value:e.definition,"auto-grow":"","background-color":"black",disabled:""}})],1)},Kt=[],Xt=n("52c4"),Jt=n.n(Xt),Yt={name:"Function",props:{id:{type:String,required:!0}},computed:{definition:function(){return this.fn.definition},functionName:function(){return this.fn.functionName},functionSchema:function(){return this.fn.functionSchema}},data:function(){return{fn:{}}},methods:{onCopy:function(e){alert("Copied!")},onError:function(e){alert("Failed to copy texts")}},apollo:{init:{query:Jt.a,variables:function(){return{id:this.id}},update:function(e){this.fn=e.functionById}}}},Zt=Yt,en=n("a722"),tn=n("3a2f"),nn=Object(v["a"])(Zt,Wt,Kt,!1,null,null,null),an=nn.exports;h()(nn,{VBtn:g["a"],VContainer:y["a"],VIcon:H["a"],VLayout:en["a"],VSpacer:K["a"],VTextarea:ve["a"],VToolbar:k["a"],VTooltip:tn["a"]});var on,rn,ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("h1",[e._v("Role Manager")]),n("h2",[e._v("Select roles to use with other tools")]),n("hr"),n("role-filter")],1)},cn=[],sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",e._l(e.roleFamilies,function(t){return n("div",{key:t.name},[n("v-toolbar",[n("v-checkbox",{attrs:{"input-value":e.familyIsSelected(t)},on:{change:function(n){return e.familyCheckChanged(t)}}}),n("h2",[e._v("Applicable Family")]),n("v-spacer"),n("h2",[e._v(e._s(t.name))]),n("v-spacer")],1),n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.familyHeaders(t),items:t.dataRows,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(a){return[n("tr",{on:{click:function(e){a.expanded=!a.expanded}}},[n("td",[n("v-checkbox",{attrs:{"input-value":e.roleIsSelected(a.item)},on:{change:function(t){return e.roleCheckChanged(a.item)}}})],1),n("td",{staticClass:"text-sm-left"},[e._v(e._s(a.item.roleName))]),e._l(t.allMemberNames,function(t){return n("td",{key:t,staticClass:"text-sm-left"},[e._v(e._s(a.item[t]))])})],2)]}}],null,!0)}),n("hr")],1)}),0)},un=[],dn=n("bd86"),mn=n("5176"),fn=n.n(mn),pn=n("75fc"),vn=n("b6d0"),bn=n.n(vn),hn=n("774e"),gn=n.n(hn),yn=(n("7514"),n("2a83")),kn=n.n(yn),Nn={name:"RoleFilterFunctionsMixin",methods:{}},_n=Nn,xn=Object(v["a"])(_n,on,rn,!1,null,null,null),Sn=xn.exports,Cn="---",Tn="+++",Pn={name:"RoleFilter",mixins:[Sn],computed:{initializing:function(){return this.$store.state.initializing},projectRoles:function(){return this.$store.state.projectRoles},applyDisabled:function(){var e=this;if(this.roles.length>0){var t=this.projectRoles.reduce(function(t,n){var a=e.roles.find(function(e){return e.roleName===n.roleName});return t?a.selected:t},!0),n=this.roles.filter(function(e){return e.selected});return t&&n.length===this.projectRoles.length}return!0},selectedRoleFamilies:function(){return this.$store.state.selectedRoleFamilies}},watch:{initializing:function(){this.computeItems()}},data:function(){return{roleFamilies:[],roles:[],checkedFamilies:[],checkedRoles:{}}},methods:{familyIsSelected:function(e){var t=this,n=e.members.reduce(function(e,n){return e?t.roleIsSelected(n):e},!0);return n},roleIsSelected:function(e){return void 0!==this.projectRoles.find(function(t){return t.roleName===e.roleName})},familyCheckChanged:function(e){var t=this.familyIsSelected(e),n=t?this.projectRoles.filter(function(t){return void 0===e.members.find(function(e){return e.roleName===t.roleName})}):gn()(new bn.a([].concat(Object(pn["a"])(e.members),Object(pn["a"])(this.projectRoles))));this.$store.commit("projectRoles",{projectRoles:n})},roleCheckChanged:function(e){e.selected=!e.selected;var t=this.projectRoles.find(function(t){return t.roleName===e.roleName}),n=t?this.projectRoles.filter(function(t){return t.roleName!==e.roleName}):[].concat(Object(pn["a"])(this.projectRoles),[e]);this.$store.commit("projectRoles",{projectRoles:n})},familyHeaders:function(e){var t=e.allMemberNames.map(function(e){return{text:e,value:e,sortable:!1}}),n=[{name:"checkbox",sortable:!1},{text:"grantee",name:"grantee",sortable:!1}].concat(t);return n},computeItems:function(){var e=this;this.roles.map(function(t){t.selected=void 0!==e.projectRoles.find(function(e){return e.name===t.name})});var t=this.roles.sort(function(e,t){return e.applicableRoles.length>=t.applicableRoles.length?-1:1}).reduce(function(t,n){var a=t.find(function(e){return new bn.a(e.allMemberNames).has(n.roleName)});if(a)return t;var i=n.applicableRoles.map(function(e){return e.roleName}).concat([n.roleName]).sort(function(t,n){var a=e.roles.find(function(e){return e.roleName===t}).applicableRoles.length,i=e.roles.find(function(e){return e.roleName===n}).applicableRoles.length;return a>=i?-1:1});return t.concat([{name:n.roleName,selected:e.selectedRoleFamilies.find(function(e){return e.name===n.roleName}),allMemberNames:i}])},[]);this.roleFamilies=t.reduce(function(t,n){var a=n.allMemberNames.reduce(function(t,a){var i=e.roles.find(function(e){return e.roleName===a}),o=n.allMemberNames.reduce(function(e,t){var n=i.applicableRoles.find(function(e){return e.roleName===t});return void 0!==n?fn()(e,Object(dn["a"])({},t,Tn)):i.roleName===t?fn()(e,Object(dn["a"])({},t,t)):fn()(e,Object(dn["a"])({},t,Cn))},{});return t.concat([fn()({roleName:a},o)])},[]),i=e.roles.filter(function(e){return n.allMemberNames.indexOf(e.roleName)>-1});return t.concat([fn()(n,{dataRows:a,members:i})])},[])},familyItems:function(e){return e.items}},apollo:{init:{query:kn.a,update:function(e){var t=this;this.roles=e.allEnabledRoles.nodes.map(function(e){t.projectRoles.find(function(t){return t.roleName===e.roleName});return Object(Ue["a"])({},e,{selected:void 0!==t.projectRoles.find(function(t){return t.roleName===e.roleName})})}),this.computeItems()}}}},Dn=Pn,On=n("ac7c"),Fn=Object(v["a"])(Dn,sn,un,!1,null,null,null),En=Fn.exports;h()(Fn,{VCheckbox:On["a"],VContainer:y["a"],VDataTable:Fe["a"],VSpacer:K["a"],VToolbar:k["a"]});var jn={name:"RoleManagerView",components:{RoleFilter:En},props:{},computed:{},data:function(){return{}},apollo:{}},Vn=jn,wn=Object(v["a"])(Vn,ln,cn,!1,null,null,null),Rn=wn.exports;h()(wn,{VContainer:y["a"]});var In=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("h1",[e._v("Table Security Manager")]),n("h2",[e._v("A tool to ensure that all "),n("a",{attrs:{href:"https://learn.graphile.org/docs/PostgreSQL_Row_Level_Security_Infosheet.pdf",target:"_blank"}},[e._v("table grants and rls policies")]),e._v(" are properly configured to support postgraphile")]),n("hr"),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"policy-manager",attrs:{ripple:""}},[e._v("\n        Policy Templates\n      ")]),n("v-tab-item",{key:"policy-manager",attrs:{lazy:""}},[n("v-card",[n("policy-manager")],1)],1),n("v-tab",{key:"policyAssignment",attrs:{ripple:""}},[e._v("\n        Policy Assignment\n      ")]),n("v-tab-item",{key:"policyAssignment",attrs:{lazy:""}},[n("v-card",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{key:"olicyAssignment"},[n("policy-assignment")],1)],1)],1)],1)],1),n("v-tab",{key:"policies",attrs:{ripple:"","ß":""}},[e._v("\n        Schema Security Scripts\n      ")]),n("v-tab-item",{key:"policies",attrs:{lazy:""}},[n("v-card",[n("schema-security-scripts")],1)],1)],1)],1)},An=[],Gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-tabs",{attrs:{dark:"","slider-color":"yellow"}},[e._l(e.managedSchemata,function(t){return n("v-tab",{key:t.schemaName,attrs:{ripple:""}},[e._v("\n      "+e._s(t.schemaName)+"\n    ")])}),e._l(e.managedSchemata,function(e){return n("v-tab-item",{key:e.schemaName,attrs:{lazy:""}},[n("policy-assignment-schema",{attrs:{schema:e}})],1)})],2)],1)},$n=[],qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",[n("v-checkbox",{attrs:{"input-value":e.selectAllValue},on:{change:function(t){return e.selectAllChanged()}}}),n("v-spacer"),n("policy-assignment-dialog",{attrs:{currentPolicyDefinition:e.defaultPolicy,tables:e.selected,bulkAssign:!0,disabled:e.selected.length<1}})],1),n("v-data-table",{attrs:{headers:e.headers,items:e.tablesToShow,"hide-actions":!0},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[n("v-checkbox",{attrs:{"input-value":e.tableCheckValue(t.item)},on:{change:function(n){return e.tableCheckChanged(t.item)}}})],1),n("td",{on:{click:function(e){t.expanded=!t.expanded}}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.expanded=!t.expanded}}},[n("v-icon",[e._v(e._s(t.expanded?"expand_less":"expand_more"))])],1),e._v("\n          "+e._s(t.item.name)+"\n        ")],1),n("td",{on:{mousedown:function(e){t.expanded=!t.expanded}}},[n("policy-assignment-dialog",{attrs:{currentPolicyDefinition:t.item.policyDefinition,tables:[t.item]}}),e.showCustomizeButton(t.item)?n("table-policy-customize-dialog",{attrs:{currentPolicyDefinition:t.item.policyDefinition,tables:[t.item]}}):e._e()],1),n("td",{attrs:{colspan:"4"},on:{click:function(e){t.expanded=!t.expanded}}},[n("table-policy-evaluator-summary",{attrs:{policyDefinition:t.item.policyDefinition,table:t.item}})],1)])]}},{key:"expand",fn:function(e){return[n("policy-definition",{attrs:{policyId:e.item.policyDefinition.id,table:e.item}})]}}])})],1)},Bn=[],Ln=n("996c"),Un=n.n(Ln),Mn=n("861c"),zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",disabled:e.disabled}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Assign Policy")]),n("v-combobox",{attrs:{items:e.allPolicyDefinitions,"item-text":"name","item-value":"id"},model:{value:e.currentSelection,callback:function(t){e.currentSelection=t},expression:"currentSelection"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.updateDisabled},on:{click:e.updateTablePolicyDefinition}},[e._v("Update")]),n("v-spacer")],1)],1)],1)],1)},Qn=[],Hn={name:"PolicyAssignmentDialog",props:{currentPolicyDefinition:{type:Object,required:!0},tables:{type:Array,required:!0},bulkAssign:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},mounted:function(){this.currentSelection=this.currentPolicyDefinition},data:function(){return{dialog:!1,currentSelection:null}},computed:{displayValue:function(){return this.bulkAssign?"Bulk Assign":this.currentPolicyDefinition?this.currentPolicyDefinition.name:"n/a"},allPolicyDefinitions:function(){return this.$store.state.policies.filter(function(e){return!e.customIdentifier})},updateDisabled:function(){return!this.bulkAssign&&(!this.currentPolicyDefinition||!this.currentSelection||this.currentPolicyDefinition.id===this.currentSelection.id)}},watch:{},methods:{updateTablePolicyDefinition:function(){this.dialog=!1;var e=this.tables.reduce(function(e,t){return e.concat([t.id])},[]);this.$store.commit("assignTablePolicy",{tableIds:e,policyDefinitionId:this.currentSelection.id})}}},Wn=Hn,Kn=(n("35d9"),n("99d9")),Xn=n("12b2"),Jn=n("2b5d"),Yn=n("169a"),Zn=Object(v["a"])(Wn,zn,Qn,!1,null,null,null),ea=Zn.exports;h()(Zn,{VBtn:g["a"],VCard:Ye["a"],VCardActions:Kn["a"],VCardTitle:Xn["a"],VCombobox:Jn["a"],VDialog:Yn["a"],VSpacer:K["a"]});var ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{attrs:{items:e.items,"hide-actions":!0,"hide-headers":!1,headers:e.headers},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{attrs:{align:"right"}},[n("v-icon",{attrs:{color:t.item.expectedColor}},[e._v("fiber_manual_record")])],1),n("td",{attrs:{align:"left"}},[e._v(e._s(t.item.expectedCount))]),n("td",{attrs:{align:"right"}},[n("v-icon",{attrs:{color:t.item.extraColor}},[e._v("fiber_manual_record")])],1),n("td",{attrs:{align:"left"}},[e._v(e._s(t.item.extraCount))]),n("td",{attrs:{align:"right"}},[n("v-icon",{attrs:{color:t.item.missingColor}},[e._v("fiber_manual_record")])],1),n("td",{attrs:{align:"left"}},[e._v(e._s(t.item.missingCount))]),n("td",{attrs:{align:"right"}},[n("v-icon",{attrs:{color:t.item.unexpectedColor}},[e._v("fiber_manual_record")])],1),n("td",{attrs:{align:"left"}},[e._v(e._s(t.item.unexpectedCount))])]}}])})},na=[],aa=n("e002"),ia={name:"TablePolicyEvaluatorSummary",mixins:[aa["a"]],props:{},mounted:function(){},data:function(){return{headers:[{text:"",sortable:!1},{text:"expected",align:"left",sortable:!1},{text:"",sortable:!1},{text:"extra",align:"left",sortable:!1},{text:"",sortable:!1},{text:"missing",align:"left",sortable:!1},{text:"",sortable:!1},{text:"unexpected",align:"left",sortable:!1}]}},computed:{items:function(){var e=this.tablePolicyEvaluation||{expected:[],missing:[],unexpected:[],extra:[]};return[{expectedCount:e.expected.length,expectedColor:e.expected.length>0?this.grantStatusColors.expected:"grey",missingCount:e.missing.length,missingColor:e.missing.length>0?this.grantStatusColors.missing:"grey",unexpectedCount:e.unexpected.length,unexpectedColor:e.unexpected.length>0?this.grantStatusColors.unexpected:"grey",extraCount:e.extra.length,extraColor:e.extra.length>0?this.grantStatusColors.extra:"grey"}]}},watch:{},methods:{}},oa=ia,ra=(n("9849"),Object(v["a"])(oa,ta,na,!1,null,null,null)),la=ra.exports;h()(ra,{VDataTable:Fe["a"],VIcon:H["a"]});var ca=n("bd5a"),sa={name:"PolicyAssignment",components:{PolicyDefinition:Mn["a"],PolicyAssignmentDialog:ea,TablePolicyEvaluatorSummary:la,TablePolicyCustomizeDialog:ca["a"],MugenScroll:Un.a},props:{schema:{type:Object,required:!0}},methods:{showCustomizeButton:function(e){return!!e&&(!e.policyDefinition||!e.policyDefinition.customIdentifier)},tableCheckValue:function(e){return void 0!==this.selected.find(function(t){return t.id===e.id})},tableCheckChanged:function(e){var t=this.selected.find(function(t){return t.id===e.id});this.selected=t?this.selected.filter(function(t){return t.id!==e.id}):this.selected.concat([e])},selectAllChanged:function(e){this.selectAllValue?this.selected=[]:this.selected=Object(pn["a"])(this.schema.schemaTables)}},watch:{},computed:{tablesToShow:function(){return this.schema.schemaTables},selectAllValue:function(){return this.schema.schemaTables.length===this.selected.length},defaultPolicy:function(){return this.$store.state.defaultPolicy},policies:function(){return this.$store.state.policies}},data:function(){return{loading:!1,selected:[],headers:[{text:"",align:"left",sortable:!1},{text:"Table Name",align:"left",sortable:!1},{text:"Assigned Policy",align:"left",sortable:!1},{text:"Current grant status compared to assigned policy - UNDER CONSTRUCTION",align:"center",class:"blah",sortable:!1,colspan:4}]}}},ua=sa,da=(n("cb8a"),Object(v["a"])(ua,qn,Bn,!1,null,null,null)),ma=da.exports;h()(da,{VBtn:g["a"],VCheckbox:On["a"],VDataTable:Fe["a"],VIcon:H["a"],VSpacer:K["a"],VToolbar:k["a"]});var fa={name:"PolicyAssignment",components:{PolicyAssignmentSchema:ma},methods:{},watch:{},computed:{policies:function(){return this.$store.state.policies},managedSchemata:function(){var e=this;return this.$store.state.managedSchemata.map(function(t){return Object(Ue["a"])({},t,{schemaTables:t.schemaTables.map(function(t){var n=e.policies.find(function(e){return e.id===t.policyDefinitionId});return Object(Ue["a"])({},t,{policyDefinition:n})}).sort(function(e,t){return e.name<t.name?-1:1})})}).sort(function(e,t){return e.schemaName<t.schemaName?-1:1})}},data:function(){return{mappedSchemata:[]}}},pa=fa,va=Object(v["a"])(pa,Gn,$n,!1,null,null,null),ba=va.exports;h()(va,{VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("default-rls-using")],1)},ga=[],ya=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-toolbar",[n("v-btn",{attrs:{disabled:e.disabled},on:{click:e.save}},[e._v("Save")]),n("h2",[e._v("Default RLS Using Clause")])],1),n("v-textarea",{attrs:{"auto-grow":"","hide-details":"","background-color":"black"},model:{value:e.defaultRlsUsing,callback:function(t){e.defaultRlsUsing=t},expression:"defaultRlsUsing"}}),n("hr")],1)},ka=[],Na={name:"DefaultRlsUsingClause",computed:{defaultDefaultRlsUsing:function(){return this.$store.state.defaultRlsUsing},disabled:function(){return this.defaultRlsUsing===this.defaultDefaultRlsUsing}},methods:{save:function(){this.$store.commit("updateDefaultRlsUsing",{defaultRlsUsing:this.defaultRlsUsing})},load:function(){this.defaultRlsUsing=this.defaultDefaultRlsUsing}},data:function(){return{defaultRlsUsing:null}},mounted:function(){this.load()}},_a=Na,xa=Object(v["a"])(_a,ya,ka,!1,null,null,null),Sa=xa.exports;h()(xa,{VBtn:g["a"],VContainer:y["a"],VTextarea:ve["a"],VToolbar:k["a"]});var Ca={name:"SecurityPolicySettings",components:{DefaultRlsUsing:Sa},computed:{},methods:{},data:function(){return{}}},Ta=Ca,Pa=Object(v["a"])(Ta,ha,ga,!1,null,null,null),Da=Pa.exports;h()(Pa,{VContainer:y["a"]});var Oa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-tabs",{attrs:{dark:"","slider-color":"yellow"}},[e._l(e.allPolicies,function(t){return n("v-tab",{key:t.name,attrs:{ripple:""}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._l(e.allPolicies,function(t){return n("v-tab-item",{key:t.name,attrs:{lazy:""}},[n("v-toolbar",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({on:{click:function(n){return e.refresh(t)}}},i),[n("v-icon",[e._v("note_add")]),e._v("Refresh")],1)]}}],null,!0)},[n("span",[e._v("Refresh")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({on:{click:function(n){return e.expand(t)}}},i),[n("v-icon",[e._v("note_add")]),e._v("Expand")],1)]}}],null,!0)},[n("span",[e._v("Expand")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.policyText(t),expression:"policyText(schemaPolicy)",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},i),[n("v-icon",[e._v("file_copy")]),e._v("Copy\n          ")],1)]}}],null,!0)},[n("span",[e._v("Copy")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.executeSql}},a),[n("v-icon",[e._v("arrow_forward")]),e._v("Execute")],1)]}}],null,!0)},[n("span",[e._v("Execute")])]),n("v-spacer"),n("v-radio-group",{attrs:{row:""},model:{value:e.policyReadability,callback:function(t){e.policyReadability=t},expression:"policyReadability"}},[n("v-radio",{key:"terse",attrs:{label:"Terse",value:"terse"}}),n("v-radio",{key:"verbose",attrs:{label:"Verbose",value:"verbose"}})],1)],1),n("v-textarea",{attrs:{disabled:!0,value:t.policy,"auto-grow":"",spellcheck:"false","background-color":"black"}})],1)})],2)],1)},Fa=[],Ea=n("ee5d"),ja=n("2f62"),Va={name:"SchemaSecurityScripts",mixins:[Ea["a"]],components:{},props:{},computed:Object(Ue["a"])({},Object(ja["b"])(["policies","managedSchemata"])),watch:{},methods:{handleCopyStatus:function(e){alert(e)},refresh:function(e){this.calculateAllPolicies()},expand:function(e){e.policy="".concat(e.policy," ")},calcOnePolicy:function(e){var t=this;return e.sort(function(e,t){return e.name<t.name?-1:1}).reduce(function(e,n){var a=t.policies.find(function(e){return e.id===n.policyDefinitionId}),i={schemaName:n.tableSchema,tableName:n.name},o=t.computePolicy(a,t.policyReadability,i,n);return e.concat(o)},"")},calculateAllPolicies:function(){var e=this;this.allPolicies=this.managedSchemata.filter(function(e){return!e.parked}).reduce(function(t,n){var a=n.schemaTables,i={name:"".concat(n.schemaName),policy:e.calcOnePolicy(a)};return t.concat([i])},[])},policyText:function(e){return e.policy},onCopy:function(){alert("Copied!")},onError:function(e){alert("Failed to copy scripts to clipboard"),console.error(e)},executeSql:function(){alert("not implemented:  server config value will expose graphile extension to execute generated script")}},data:function(){return{allPolicies:[],schemaPolicy:"NOT CALCULATED",defaultRlsPolicies:"NOT CALCULATED",defaultNoRlsPolicies:"NOT CALCULATED",selectedTabName:"",policyReadability:"terse"}},mounted:function(){this.calculateAllPolicies()}},wa=Va,Ra=n("67b6"),Ia=n("43a6"),Aa=Object(v["a"])(wa,Oa,Fa,!1,null,null,null),Ga=Aa.exports;h()(Aa,{VBtn:g["a"],VContainer:y["a"],VIcon:H["a"],VRadio:Ra["a"],VRadioGroup:Ia["a"],VSpacer:K["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"],VTextarea:ve["a"],VToolbar:k["a"],VTooltip:tn["a"]});var $a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",[n("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{color:"primary",dark:""}},a),[e._v("New Policy Template")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("New Policy")]),n("v-text-field",{attrs:{label:"Name"},model:{value:e.newPolicyName,callback:function(t){e.newPolicyName=t},expression:"newPolicyName"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.saveNewPolicy}},[e._v("Save")]),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1),n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.headers,items:e.policies,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[n("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.expanded=!t.expanded}}},[n("v-icon",[e._v(e._s(t.expanded?"expand_less":"expand_more"))])],1)],1),n("td",{key:"id"},[e._v(e._s(t.item.id))]),n("td",{key:"name"},[e._v(e._s(t.item.name))])])]}},{key:"expand",fn:function(e){return[n("policy-definition",{key:e.item.id,attrs:{policyId:e.item.id}})]}}])})],1)},qa=[],Ba=n("95fb"),La=Ba["a"],Ua=n("2677"),Ma=Object(v["a"])(La,$a,qa,!1,null,null,null),za=Ma.exports;h()(Ma,{VBtn:g["a"],VCard:Ye["a"],VCardActions:Kn["a"],VCardTitle:Xn["a"],VDataTable:Fe["a"],VDialog:Yn["a"],VIcon:H["a"],VSpacer:K["a"],VTextField:Ua["a"],VToolbar:k["a"]});var Qa={name:"TableSecurityView",components:{SecurityPolicySettings:Da,SchemaSecurityScripts:Ga,PolicyManager:za,PolicyAssignment:ba},props:{},computed:{},data:function(){return{activeTab:null}},apollo:{}},Ha=Qa,Wa=n("0e8f"),Ka=Object(v["a"])(Ha,In,An,!1,null,null,null),Xa=Ka.exports;h()(Ka,{VCard:Ye["a"],VContainer:y["a"],VFlex:Wa["a"],VLayout:en["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var Ja=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("h1",[e._v("Function Security Manager")]),n("h2",[e._v("A tool to ensure that all "),n("a",{attrs:{href:"https://learn.graphile.org/docs/PostgreSQL_Row_Level_Security_Infosheet.pdf",target:"_blank"}},[e._v("function grants")]),e._v(" are properly configured to support postgraphile")]),n("hr"),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"policy-manager",attrs:{ripple:""}},[e._v("\n      Policy Templates\n    ")]),n("v-tab-item",{key:"policy-manager",attrs:{lazy:""}},[n("v-card",[n("policy-manager")],1)],1),n("v-tab",{key:"policyAssignment",attrs:{ripple:""}},[e._v("\n      Policy Assignment\n    ")]),n("v-tab-item",{key:"policyAssignment",attrs:{lazy:""}},[n("v-card",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{key:"policyAssignment"},[n("policy-assignment")],1)],1)],1)],1)],1),n("v-tab",{key:"policies",attrs:{ripple:""}},[e._v("\n      Schema Security Scripts\n    ")]),n("v-tab-item",{key:"policies",attrs:{lazy:""}},[n("v-card",[n("schema-security-scripts")],1)],1)],1)],1)},Ya=[],Za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",[n("v-dialog",{attrs:{persistent:"","max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{color:"primary",dark:""}},a),[e._v("New Policy Template")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("New Policy")]),n("v-text-field",{attrs:{label:"Name"},model:{value:e.newPolicyName,callback:function(t){e.newPolicyName=t},expression:"newPolicyName"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:e.saveNewPolicy}},[e._v("Save")]),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1)],1),n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.headers,items:e.policies,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[n("td",{key:"id"},[e._v(e._s(t.item.id))]),n("td",{key:"name"},[e._v(e._s(t.item.name))])])]}},{key:"expand",fn:function(e){return[n("policy-definition",{key:e.item.id,attrs:{policyId:e.item.id}})]}}])})],1)},ei=[],ti=n("567d"),ni=ti["a"],ai=Object(v["a"])(ni,Za,ei,!1,null,null,null),ii=ai.exports;h()(ai,{VBtn:g["a"],VCard:Ye["a"],VCardActions:Kn["a"],VCardTitle:Xn["a"],VDataTable:Fe["a"],VDialog:Yn["a"],VSpacer:K["a"],VTextField:Ua["a"],VToolbar:k["a"]});var oi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-tabs",{attrs:{dark:"","slider-color":"yellow"}},[e._l(e.managedSchemata,function(t){return n("v-tab",{key:t.schemaName,attrs:{ripple:""}},[e._v("\n      "+e._s(t.schemaName)+"\n    ")])}),e._l(e.managedSchemata,function(e){return n("v-tab-item",{key:e.schemaName},[n("function-policy-assignment-schema",{attrs:{schema:e}})],1)})],2)],1)},ri=[],li=n("82cd"),ci=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",disabled:e.disabled}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Assign Policy")]),n("v-combobox",{attrs:{items:e.allPolicyDefinitions,"item-text":"name","item-value":"id"},model:{value:e.currentSelection,callback:function(t){e.currentSelection=t},expression:"currentSelection"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.updateDisabled},on:{click:e.updateTablePolicyDefinition}},[e._v("Update")]),n("v-spacer")],1)],1)],1)],1)},si=[],ui={name:"FunctionAssignmentDialog",props:{currentPolicyDefinition:{type:Object,required:!0},functions:{type:Array,required:!0},bulkAssign:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},mounted:function(){this.currentSelection=this.currentPolicyDefinition},data:function(){return{dialog:!1,currentSelection:null}},computed:{displayValue:function(){return this.bulkAssign?"Bulk Assign":this.currentPolicyDefinition?this.currentPolicyDefinition.name:"n/a"},allPolicyDefinitions:function(){return this.$store.state.functionPolicies},updateDisabled:function(){return!this.bulkAssign&&(!this.currentPolicyDefinition||!this.currentSelection||this.currentPolicyDefinition.id===this.currentSelection.id)}},watch:{},methods:{updateTablePolicyDefinition:function(){this.dialog=!1;var e=this.functions.reduce(function(e,t){return e.concat([t.id])},[]);this.$store.commit("assignFunctionPolicy",{functionIds:e,policyDefinitionId:this.currentSelection.id})}}},di=ui,mi=(n("a789"),Object(v["a"])(di,ci,si,!1,null,null,null)),fi=mi.exports;h()(mi,{VBtn:g["a"],VCard:Ye["a"],VCardActions:Kn["a"],VCardTitle:Xn["a"],VCombobox:Jn["a"],VDialog:Yn["a"],VSpacer:K["a"]});var pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",[n("v-checkbox",{attrs:{"input-value":e.selectAllValue},on:{change:function(t){return e.selectAllChanged()}}}),n("v-spacer"),n("policy-assignment-dialog",{attrs:{currentPolicyDefinition:e.defaultPolicy,functions:e.functionsToShow,bulkAssign:!0,disabled:0===e.selected.length}})],1),n("v-data-table",{attrs:{headers:e.headers,items:e.functionsToShow,"hide-actions":!0},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[n("v-checkbox",{attrs:{"input-value":e.functionCheckValue(t.item)},on:{change:function(n){return e.functionCheckChanged(t.item)}}})],1),n("td",{on:{click:function(e){t.expanded=!t.expanded}}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.expanded=!t.expanded}}},[n("v-icon",[e._v(e._s(t.expanded?"expand_less":"expand_more"))])],1)],1),n("td",{on:{click:function(e){t.expanded=!t.expanded}}},[e._v(e._s(t.item.name))]),n("td",{on:{click:function(e){t.expanded=!t.expanded}}},[n("policy-assignment-dialog",{attrs:{currentPolicyDefinition:t.item.policyDefinition,functions:[t.item]}})],1)])]}},{key:"expand",fn:function(e){return[n("policy-definition",{attrs:{policyId:e.item.policyDefinition.id,theFunction:e.item}})]}}])})],1)},vi=[],bi={name:"FunctionAssignment",components:{PolicyDefinition:li["a"],PolicyAssignmentDialog:fi},props:{schema:{type:Object,required:!0}},methods:{functionCheckValue:function(e){return void 0!==this.selected.find(function(t){return t.id===e.id})},functionCheckChanged:function(e){var t=this.selected.find(function(t){return t.id===e.id});this.selected=t?this.selected.filter(function(t){return t.id!==e.id}):this.selected.concat([e])},selectAllChanged:function(e){this.selectAllValue?this.selected=[]:this.selected=Object(pn["a"])(this.schema.schemaFunctions)}},watch:{},computed:{functionsToShow:function(){return this.schema.schemaFunctions},selectAllValue:function(){return this.schema.schemaFunctions.length===this.selected.length},defaultPolicy:function(){return this.$store.state.defaultFunctionPolicy}},data:function(){return{selected:[],headers:[{text:"",sortable:!1},{text:"",sortable:!1},{text:"Function Name",sortable:!1},{text:"Policy Name",sortable:!1}]}}},hi=bi,gi=Object(v["a"])(hi,pi,vi,!1,null,null,null),yi=gi.exports;h()(gi,{VBtn:g["a"],VCheckbox:On["a"],VDataTable:Fe["a"],VIcon:H["a"],VSpacer:K["a"],VToolbar:k["a"]});var ki={name:"FunctionAssignment",components:{PolicyDefinition:li["a"],PolicyAssignmentDialog:fi,FunctionPolicyAssignmentSchema:yi},methods:{},watch:{},computed:{functionPolicies:function(){return this.$store.state.functionPolicies},managedSchemata:function(){var e=this;return this.$store.state.managedSchemata.map(function(t){return Object(Ue["a"])({},t,{schemaFunctions:t.schemaFunctions.map(function(t){var n=e.functionPolicies.find(function(e){return e.id===t.functionPolicyDefinitionId});return n||(console.log(t.name,t.functionPolicyDefinitionId,e.functionPolicies),console.log("pd",n)),Object(Ue["a"])({},t,{policyDefinition:n})}).sort(function(e,t){return e.name<t.name?-1:1})})}).sort(function(e,t){return e.schemaName<t.schemaName?-1:1})}},data:function(){return{mappedSchemata:[],headers:[{text:"",sortable:!1},{text:"Function Name",sortable:!1},{text:"Policy Name",sortable:!1}]}}},Ni=ki,_i=Object(v["a"])(Ni,oi,ri,!1,null,null,null),xi=_i.exports;h()(_i,{VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var Si=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-tabs",{attrs:{dark:"","slider-color":"yellow"}},[e._l(e.allPolicies,function(t){return n("v-tab",{key:t.name,attrs:{ripple:""}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._l(e.allPolicies,function(t){return n("v-tab-item",{key:t.name},[n("v-toolbar",[n("v-layout",{attrs:{"align-center":"","align-content-center":"","justify-center":"","justify-content-center":""}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.refresh}},a),[n("v-icon",[e._v("note_add")]),e._v("Refresh")],1)]}}],null,!0)},[n("span",[e._v("Refresh")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({on:{click:function(n){return e.expand(t)}}},i),[n("v-icon",[e._v("note_add")]),e._v("Expand")],1)]}}],null,!0)},[n("span",[e._v("Expand")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-btn",e._g({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.policyText(t),expression:"policyText(schemaPolicy)",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},i),[n("v-icon",[e._v("file_copy")]),e._v("Copy\n            ")],1)]}}],null,!0)},[n("span",[e._v("Copy")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.executeSql}},a),[n("v-icon",[e._v("arrow_forward")]),e._v("Execute")],1)]}}],null,!0)},[n("span",[e._v("Execute")])]),n("v-spacer"),n("v-radio-group",{attrs:{row:""},model:{value:e.policyReadability,callback:function(t){e.policyReadability=t},expression:"policyReadability"}},[n("v-radio",{key:"terse",attrs:{label:"Terse",value:"terse"}}),n("v-radio",{key:"verbose",attrs:{label:"Verbose",value:"verbose"}})],1)],1)],1),n("v-textarea",{attrs:{disabled:!0,value:t.policy,"auto-grow":"",spellcheck:"false","background-color":"black"}})],1)})],2)],1)},Ci=[],Ti=n("77d3"),Pi={name:"SchemaSecurityScripts",mixins:[Ti["a"]],components:{},props:{},computed:Object(Ue["a"])({},Object(ja["b"])(["functionPolicies","managedSchemata"])),watch:{functionPolicies:function(){this.calculateAllPolicies()},policyReadability:function(){this.calculateAllPolicies()}},methods:{refresh:function(){this.doComputePolicy()},expand:function(){this.computedPolicy="".concat(this.computedPolicy," ")},calcOnePolicy:function(e){var t=this,n=e.sort(function(e,t){return e.name<t.name?-1:1}).reduce(function(e,n){var a=t.functionPolicies.find(function(e){return e.id===n.functionPolicyDefinitionId}),i={schemaName:n.functionSchema,functionName:n.name},o=t.computePolicy(a,t.policyReadability,i);return e.concat(o)},"");return n},calculateAllPolicies:function(){var e=this;this.allPolicies=this.managedSchemata.filter(function(e){return!e.parked}).reduce(function(t,n){var a=n.schemaFunctions,i={name:"".concat(n.schemaName),policy:e.calcOnePolicy(a)};return t.concat([i])},[])},policyText:function(e){return e.policy},onCopy:function(){alert("Copied!")},onError:function(e){alert("Failed to copy scripts to clipboard"),console.error(e)},executeSql:function(){alert("not implemented:  server config value will expose graphile extension to execute generated script")}},data:function(){return{allPolicies:[],schemaPolicy:"NOT CALCULATED",defaultRlsPolicies:"NOT CALCULATED",defaultNoRlsPolicies:"NOT CALCULATED",selectedTabName:"",policyReadability:"terse"}},mounted:function(){this.calculateAllPolicies()}},Di=Pi,Oi=Object(v["a"])(Di,Si,Ci,!1,null,null,null),Fi=Oi.exports;h()(Oi,{VBtn:g["a"],VContainer:y["a"],VIcon:H["a"],VLayout:en["a"],VRadio:Ra["a"],VRadioGroup:Ia["a"],VSpacer:K["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"],VTextarea:ve["a"],VToolbar:k["a"],VTooltip:tn["a"]});var Ei={name:"FunctionSecurityView",components:{SchemaSecurityScripts:Fi,PolicyManager:ii,PolicyAssignment:xi},props:{},computed:{},data:function(){return{activeTab:null}},apollo:{}},ji=Ei,Vi=Object(v["a"])(ji,Ja,Ya,!1,null,null,null),wi=Vi.exports;h()(Vi,{VCard:Ye["a"],VContainer:y["a"],VFlex:Wa["a"],VLayout:en["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var Ri=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("v-text-field",{attrs:{label:"Search Term"},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),n("v-btn",{attrs:{disabled:e.disabled},on:{click:e.performSearch}},[e._v("Search")]),n("hr"),n("function-list",{attrs:{functions:e.functions}})],1)},Ii=[],Ai=n("ab3b"),Gi=n.n(Ai),$i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{attrs:{headers:e.headers,items:e.functions,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.functionSchema))]),n("td",[e._v(e._s(t.item.functionName))]),n("td",[n("router-link",{attrs:{to:{name:"function",params:{id:t.item.id}},target:"_blank"}},[n("v-icon",[e._v("launch")])],1)],1)]}}])})},qi=[],Bi={name:"FunctionList",components:{},props:{functions:{type:Array,required:!0}},computed:{},data:function(){return{headers:[{text:"schema",sortable:!1},{text:"function",sortable:!1},{text:"",sortable:!1}]}},methods:{}},Li=Bi,Ui=Object(v["a"])(Li,$i,qi,!1,null,null,null),Mi=Ui.exports;h()(Ui,{VDataTable:Fe["a"],VIcon:H["a"]});var zi={name:"SearchView",components:{FunctionList:Mi},props:{},computed:{disabled:function(){return void 0===this.searchTerm||null===this.searchTerm||""===this.searchTerm}},data:function(){return{searchTerm:"into SCHEMA.TABLE",functions:[]}},methods:{performSearch:function(){var e=this;this.$apollo.mutate({mutation:Gi.a,variables:{searchTerm:this.searchTerm}}).then(function(t){e.functions=t.data.searchFunctions}).catch(function(e){console.log(e)})}}},Qi=zi,Hi=Object(v["a"])(Qi,Ri,Ii,!1,null,null,null),Wi=Hi.exports;h()(Hi,{VBtn:g["a"],VContainer:y["a"],VTextField:Ua["a"]});var Ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h1",[e._v("Settings")]),n("h2",{staticStyle:{color:"red"}},[e._v("Under Construction")]),n("hr"),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"table-policy-template",attrs:{ripple:""}},[e._v("\n      Table Policy Template\n    ")]),n("v-tab-item",{key:"table-policy-template"},[n("security-policy-settings")],1)],1)],1)},Xi=[],Ji={name:"Settings",components:{SecurityPolicySettings:Da},props:{},computed:{},data:function(){return{activeTab:null}},apollo:{}},Yi=Ji,Zi=Object(v["a"])(Yi,Ki,Xi,!1,null,null,null),eo=Zi.exports;h()(Zi,{VContainer:y["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var to=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"ma-0":"","pa-0":""}},[n("h1",[e._v("Foreign Key Index Manager")]),n("h2",[e._v("A tool to ensure that all "),n("a",{attrs:{href:"https://www.graphile.org/postgraphile/postgresql-indexes/",target:"_blank"}},[e._v("foreign keys")]),e._v(" are properly indexed to support postgraphile")]),n("h1",{staticStyle:{color:"red"}},[e._v("Under Construction")]),n("hr"),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"policy-manager",attrs:{ripple:""}},[e._v("\n      Policy Templates\n    ")]),n("v-tab-item",{key:"policy-manager"},[n("v-card",[n("policy-manager")],1)],1)],1)],1)},no=[],ao=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-container",{attrs:{"bkeepground-color":"blkeep"}},[n("v-tabs",{attrs:{dark:"","slider-color":"yellow"}},[e._l(e.managedSchemata,function(t){return n("v-tab",{key:t.schemaName,attrs:{ripple:""}},[e._v("\n        "+e._s(t.schemaName)+"\n      ")])}),e._l(e.managedSchemata,function(t){return n("v-tab-item",{key:t.schemaName},[n("v-data-table",{attrs:{headers:e.headers,items:t.schemaTables,"hide-actions":!0},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[n("td",[n("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.expanded=!t.expanded}}},[n("v-icon",[e._v(e._s(t.expanded?"expand_less":"expand_more"))])],1)],1),n("td",[e._v(e._s(t.item.name))]),e._l(e.statusMap,function(a){return n("td",{key:a.name},[n("v-icon",{attrs:{color:t.item.sortedReferentialConstraints[a.name].columnIndexStatusColor}},[e._v("fiber_manual_record")]),n("span",[e._v(e._s(t.item.sortedReferentialConstraints[a.name].referentialConstraintCount))])],1)})],2)]}},{key:"expand",fn:function(e){return[n("fk-index-table-manager",{key:e.item.id,attrs:{table:e.item}})]}}],null,!0)})],1)})],2)],1)],1)},io=[],oo=n("a4bb"),ro=n.n(oo),lo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-container",{attrs:{"background-color":"black"}},[n("v-tabs",{attrs:{dark:"","slider-color":"yellow"}},[n("v-tab",{key:"policy",attrs:{ripple:""}},[e._v("\n        policy\n      ")]),n("v-tab-item",{key:"policy"},[n("fk-index-evaluator",{attrs:{table:e.table}})],1),n("v-tab",{key:"indices",attrs:{ripple:""}},[e._v("\n        indices\n      ")]),n("v-tab-item",{key:"indices"},[n("table-indices",{attrs:{indices:e.indices}})],1),n("v-tab",{key:"constraints",attrs:{ripple:""}},[e._v("\n        foreign keys\n      ")]),n("v-tab-item",{key:"constraints"},[n("table-referential-constraints",{attrs:{referentialConstraints:e.referentialConstraints}})],1)],1)],1)],1)},co=[],so=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{color:"black"}},[n("v-container",{attrs:{"background-color":"black"}},e._l(e.referentialConstraintStatuses,function(t){return n("v-card",{key:t},[n("v-toolbar",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs2:""}},[n("v-chip",[e._v(e._s(t))]),n("v-icon",{attrs:{color:e.sortedReferentialConstraints[t].columnIndexStatusColor}},[e._v("fiber_manual_record")])],1),e._l(e.sortedReferentialConstraints[t].actions,function(a){return n("v-flex",{key:a,attrs:{xs2:""}},[n("v-checkbox",{attrs:{"input-value":!1,label:a+" all"},on:{change:function(n){return e.actionChanged(a,t)}}})],1)})],2)],1)],1)],1),n("fk-index-evaluator-segment",{key:t,attrs:{actions:e.sortedReferentialConstraints[t].actions,referentialConstraints:e.sortedReferentialConstraints[t].referentialConstraints}})],1)}),1)],1)},uo=[],mo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{color:"black"}},[n("v-container",{attrs:{"background-color":"black"}},[n("v-data-table",{attrs:{headers:e.headers,items:e.referentialConstraints,"hide-actions":!0,stripe:""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[e._l(e.actionColumns(t.item),function(a){return n("td",{key:a},[n("v-checkbox",{attrs:{"input-value":t.item.actions[a]},on:{change:function(n){return e.actionChanged(a,t.item)}}})],1)}),n("td",[e._v(e._s(t.item.columnName))]),n("td",[e._v(e._s(t.item.constraintName))]),n("td",[e._v(e._s(t.item.indexName))]),n("td",[e._v(e._s(t.item.expectedIndexName))]),n("td",[e._v(e._s(t.item.columnIndexStatus))])],2)]}}])})],1)],1)},fo=[],po={name:"FkIndexEvaluatorSegment",props:{referentialConstraints:{type:Array,required:!0},actions:{type:Array,required:!0}},components:{},methods:{actionColumns:function(e){return ro()(e.actions)},actionChanged:function(e,t){console.log("actionChanged",e,t)}},watch:{},computed:{headers:function(){return[].concat(Object(pn["a"])(this.actions.map(function(e){return{text:e,sortable:!1}})),[{text:"Column  Name",sortable:!1},{text:"FK Name",sortable:!1},{text:"Index",sortable:!1},{text:"Expected",sortable:!1},{text:"status",sortable:!1}])}},data:function(e){return{}}},vo=po,bo=Object(v["a"])(vo,mo,fo,!1,null,null,null),ho=bo.exports;h()(bo,{VCard:Ye["a"],VCheckbox:On["a"],VContainer:y["a"],VDataTable:Fe["a"]});var go={name:"FkIndexEvaluator",props:{table:{type:Object,required:!0}},components:{FkIndexEvaluatorSegment:ho},methods:{actionChanged:function(e,t){console.log("actionChanged",e,t)}},watch:{},computed:{referentialConstraints:function(){return this.table.referentialConstraints},sortedReferentialConstraints:function(){return this.table.sortedReferentialConstraints},referentialConstraintStatuses:function(){var e=this;return ro()(this.sortedReferentialConstraints).filter(function(t){return e.sortedReferentialConstraints[t].referentialConstraintCount>0}).sort(function(e,t){return e<t?-1:1})}},data:function(){return{}}},yo=go,ko=n("cc20"),No=Object(v["a"])(yo,so,uo,!1,null,null,null),_o=No.exports;h()(No,{VCard:Ye["a"],VCheckbox:On["a"],VChip:ko["a"],VContainer:y["a"],VFlex:Wa["a"],VIcon:H["a"],VLayout:en["a"],VToolbar:k["a"]});var xo={name:"FkIndexTableManager",components:{FkIndexEvaluator:_o,TableIndices:Ge,TableReferentialConstraints:et},props:{table:{type:Object,required:!0}},methods:{},watch:{},computed:{referentialConstraints:function(){return this.table.referentialConstraints||[]},indices:function(){return this.table.indices||[]},policies:function(){return this.$store.state.policies}},data:function(){return{}}},So=xo,Co=Object(v["a"])(So,lo,co,!1,null,null,null),To=Co.exports;h()(Co,{VCard:Ye["a"],VContainer:y["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var Po="AS_EXPECTED",Do="NO_INDEX",Oo="UNEXPECTED_NAME",Fo="EXTRA_INDEX",Eo="green",jo="yellow",Vo="blue",wo="red",Ro={name:"ForeignKeyIndexManager",components:{FkIndexTableManager:To},methods:{columnIndexStatusColor:function(e){switch(e){case Po:return Eo;case Do:return jo;case Oo:return Vo;case Fo:break}}},watch:{},computed:{policies:function(){return this.$store.state.policies},managedSchemata:function(){var e=this;return this.$store.state.managedSchemata.map(function(t){return Object(Ue["a"])({},t,{schemaTables:t.schemaTables.map(function(t){return Object(Ue["a"])({},t,{referentialConstraints:t.referentialConstraints.reduce(function(n,a){var i=a.referencingColumnUsage[0].columnName,o=t.indices.filter(function(e){return e.columnName===i}),r="idx_".concat(a.referencingColumnUsage[0].tableSchema,"_").concat(a.referencingColumnUsage[0].tableName,"_").concat(a.referencedColumnUsage[0].tableSchema,"_").concat(a.referencedColumnUsage[0].tableName);switch(o.length){case 0:var l=e.statusMap.find(function(e){return e.name===Do});return n.concat([Object(Ue["a"])({},a,{columnName:i,columnIndexStatus:Do,columnIndexStatusColor:jo,indexName:"NO INDEX",expectedIndexName:r,actions:l.defaultActions})]);case 1:var c=o[0],s=c.indexName!==r,u=e.statusMap.find(function(e){return e.name===Oo}),d=e.statusMap.find(function(e){return e.name===Po});return n.concat([Object(Ue["a"])({},a,{columnName:i,columnIndexStatus:s?Oo:Po,columnIndexStatusColor:s?Vo:Eo,indexName:o[0].indexName,expectedIndexName:r,actions:s?u.defaultActions:d.defaultActions})]);default:return o.reduce(function(t,n){var o=n.indexName!==r,l=e.statusMap.find(function(e){return e.name===Fo}),c=e.statusMap.find(function(e){return e.name===Po});return t.concat([Object(Ue["a"])({},a,{columnName:i,columnIndexStatus:o?Po:Fo,columnIndexStatusColor:o?Eo:wo,indexName:n.indexName,expectedIndexName:r,actions:o?c.defaultActions:l.defaultActions})])},[])}},[])})}).map(function(t){return Object(Ue["a"])({},t,{sortedReferentialConstraints:e.statusMap.reduce(function(e,n){var a=t.referentialConstraints.filter(function(e){return e.columnIndexStatus===n.name});return Object(Ue["a"])({},e,Object(dn["a"])({},n.name,Object(Ue["a"])({},n,{actions:ro()(n.defaultActions),referentialConstraints:a,referentialConstraintCount:a.length,columnIndexStatusColor:a.length>0?n.columnIndexStatusColor:"grey"})))},{})})}).sort(function(e,t){return e.name<t.name?-1:1})})}).sort(function(e,t){return e.schemaName<t.schemaName?-1:1})},headers:function(){return[{text:"",sortable:!1},{text:"Table Name",sortable:!1}].concat(Object(pn["a"])(this.statusMap.map(function(e){return{text:e.name,sortable:!1}})))}},data:function(){return{mappedSchemata:[],statusMap:[{name:Po,columnIndexStatusColor:Eo,defaultActions:{}},{name:Do,columnIndexStatusColor:jo,defaultActions:{ack:!1,create:!1}},{name:Oo,columnIndexStatusColor:Vo,defaultActions:{ack:!1,rename:!0}},{name:Fo,columnIndexStatusColor:wo,defaultActions:{ack:!1,drop:!1}}]}}},Io=Ro,Ao=Object(v["a"])(Io,ao,io,!1,null,null,null),Go=Ao.exports;h()(Ao,{VBtn:g["a"],VCard:Ye["a"],VContainer:y["a"],VDataTable:Fe["a"],VIcon:H["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var $o={name:"ForeignKeyIndexView",components:{PolicyManager:Go},props:{},computed:{},data:function(){return{activeTab:null}},apollo:{}},qo=$o,Bo=Object(v["a"])(qo,to,no,!1,null,null,null),Lo=Bo.exports;h()(Bo,{VCard:Ye["a"],VContainer:y["a"],VTab:vt["a"],VTabItem:bt["a"],VTabs:ht["a"]});var Uo=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Mo=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("A tool to ensure that all "),n("a",{attrs:{href:"https://www.graphile.org/postgraphile/smart-comments/",target:"_blank"}},[e._v("smart comments")]),e._v(" are properly configured to support postgraphile")])])}],zo={name:"SmartCommentManager"},Qo=zo,Ho=Object(v["a"])(Qo,Uo,Mo,!1,null,null,null),Wo=Ho.exports,Ko=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Export Project")]),n("v-toolbar",[n("v-btn",{on:{click:e.exportProject}},[e._v("Save")])],1),n("v-textarea",{attrs:{value:e.projectJson,"auto-grow":"",readonly:""}})],1)},Xo=[],Jo={name:"ExportProject",components:{},props:{},computed:{projectName:function(){return this.project?this.project.name:"N/A"},projectJson:function(){return me()(this.$store.state,0,2)}},methods:{exportProject:function(){var e=this.projectJson,t=new Blob([e],{type:"text/plain"}),n=document.createEvent("MouseEvents"),a=document.createElement("a");a.download="pgdbi.json",a.href=window.URL.createObjectURL(t),a.dataset.downloadurl=["text/json",a.download,a.href].join(":"),n.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}}},Yo=Jo,Zo=Object(v["a"])(Yo,Ko,Xo,!1,null,null,null),er=Zo.exports;h()(Zo,{VBtn:g["a"],VTextarea:ve["a"],VToolbar:k["a"]});var tr=n("0e44"),nr=(n("ac6a"),{initializing:!0,schemaFilterOn:!0,policies:[],functionPolicies:[],defaultPolicy:null,defaultFunctionPolicy:null,managedSchemata:[],parkedSchemata:[],rawSchemata:[],schemaFilter:[],projectRoles:[],selectedRoleFamilies:[],defaultRlsUsing:"( owner_id = viewer_id() )",defaultRlsWithCheck:"",defaultRlsQualifiers:{all:{policies:[]},select:{policies:[]},insert:{policies:[]},update:{policies:[]},delete:{policies:[]}},defaultRoleGrants:{select:"DENIED",insert:"DENIED",update:"DENIED",delete:"DENIED"},functionPolicyHeaderTemplate:"\n  ----------  BEGIN: {{schemaName}}.{{functionName}}\n  \n  ",functionPolicyFooterTemplate:"\n\n  ----------  END: {{schemaName}}.{{functionName}}",defaultFunctionRoleGrants:{execute:"DENIED"}});function ar(e){ro()(nr).forEach(function(t){e[t]=nr[t]})}var ir=ar;function or(e){e.schemaFilterOn=!0}var rr=or;function lr(e,t){if(!e.defaultPolicy){var n={id:1e4*(new Date).getTime()+621355968e9,name:"Default Table Policy - NO ACCESS",policyHeaderTemplate:e.policyHeaderTemplate,policyFooterTemplate:e.policyFooterTemplate,roleTableGrantTemplate:e.roleTableGrantTemplate,enableRls:!1,columnExclusionOverrides:{insert:[],update:[]},columnExclusions:{insert:{},update:{}},roleGrants:e.projectRoles.reduce(function(t,n){return Object(Ue["a"])({},t,Object(dn["a"])({},n.roleName,e.defaultRoleGrants))},{}),rlsQualifiers:e.projectRoles.reduce(function(t,n){return Object(Ue["a"])({},t,Object(dn["a"])({},n.roleName,e.defaultRlsQualifiers))},{})};e.defaultPolicy=n,e.policies=e.policies.concat([n])}if(!e.defaultFunctionPolicy){var a={id:1e4*(new Date).getTime()+621355968e9,name:"Default Function Policy - NO ACCESS",functionPolicyHeaderTemplate:e.functionPolicyHeaderTemplate,functionPolicyFooterTemplate:e.functionPolicyFooterTemplate,roleFunctionGrants:e.projectRoles.reduce(function(t,n){return Object(Ue["a"])({},t,Object(dn["a"])({},n.roleName,e.defaultFunctionRoleGrants))},{})};e.defaultFunctionPolicy=a,e.functionPolicies=e.functionPolicies.concat([a])}var i=e.managedSchemata.reduce(function(e,n){return t.find(function(e){return e.id===n.id})?e.concat([n]):e},[]),o=e.managedSchemata.reduce(function(e,n){return t.find(function(e){return e.id===n.id})?e:e.concat([n])},[]),r=e.parkedSchemata.reduce(function(e,n){return t.find(function(e){return e.id===n.id})?e.concat([n]):e},[]),l=e.parkedSchemata.reduce(function(e,t){return r.find(function(e){return e.id===t.id})?e:e.concat([t])},[]),c=t.reduce(function(e,t){return r.concat(i).find(function(e){return e.id===t.id})?e:e.concat([t])},[]).map(function(t){return Object(Ue["a"])({},t,{schemaTables:t.schemaTables.map(function(t){return Object(Ue["a"])({},t,{policyDefinitionId:t.policyDefinitionId||e.defaultPolicy.id})}),schemaFunctions:t.schemaFunctions.map(function(t){return Object(Ue["a"])({},t,{functionPolicyDefinitionId:t.functionPolicyDefinitionId||e.defaultFunctionPolicy.id})})})});e.managedSchemata=r.concat(c).concat(i),e.parkedSchemata=o.concat(l),e.initializing=!1,e.schemaFilterOn=!1}var cr=lr;function sr(e,t,n){var a=e.managedSchemata.reduce(function(e,n){if(e.currentSchema)return e;var a=n.schemaTables.find(function(e){return e.id===t});return a?Object(Ue["a"])({},e,{currentSchema:n,currentTable:a}):e},{currentSchema:null,currentTable:null}),i=a.currentSchema,o=a.currentTable,r=e.managedSchemata.filter(function(e){return e.id!==i.id}),l=i.schemaTables.filter(function(e){return e.id!==o.id});return e.managedSchemata=[].concat(Object(pn["a"])(r),[Object(Ue["a"])({},i,{schemaTables:[].concat(Object(pn["a"])(l),[Object(Ue["a"])({},o,{policyDefinitionId:n})])})]),e}function ur(e,t){var n=t.tableIds,a=t.policyDefinitionId;n.reduce(function(e,t){return sr(e,t,a)},e)}var dr=ur;function mr(e,t){var n=e.projectRoles=t.projectRoles.map(function(e){return Object(Ue["a"])({},e,{applicableRoles:e.applicableRoles||[]})});e.policies=e.policies.map(function(t){return Object(Ue["a"])({},t,{roleGrants:n.reduce(function(n,a){return Object(Ue["a"])({},n,Object(dn["a"])({},a.roleName,t.roleGrants[a.name]||e.defaultRoleGrants))},{}),rlsQualifiers:n.reduce(function(n,a){return Object(Ue["a"])({},n,Object(dn["a"])({},a.roleName,t.rlsQualifiers[a.name]||e.defaultRlsQualifiers))},{})})}),e.functionPolicies=e.functionPolicies.map(function(t){return Object(Ue["a"])({},t,{roleFunctionGrants:n.reduce(function(n,a){return Object(Ue["a"])({},n,Object(dn["a"])({},a.roleName,t.roleFunctionGrants[a.name]||e.defaultFunctionRoleGrants))},{})})})}var fr=mr;function pr(e,t){e.selectedRoleFamilies=t.selectedRoleFamilies}var vr=pr;function br(e,t){e.defaultRlsUsing=t.defaultRlsUsing}var hr=br;function gr(e,t){e.defaultRlsWithCheck=t.defaultRlsWithCheck}var yr=gr;function kr(e,t){var n=e.policies.find(function(e){return e.name===t.name});if(n)throw new Error("A policy with this name already exists");var a=t.name,i=e.projectRoles,o={id:1e4*(new Date).getTime()+621355968e9,name:a,policyHeaderTemplate:e.policyHeaderTemplate,policyFooterTemplate:e.policyFooterTemplate,roleTableGrantTemplate:e.roleTableGrantTemplate,enableRls:!1,columnExclusionOverrides:{insert:[],update:[]},columnExclusions:{insert:{},update:{}},roleGrants:i.reduce(function(t,n){return Object(Ue["a"])({},t,Object(dn["a"])({},n.roleName,e.defaultRoleGrants))},{}),rlsQualifiers:i.reduce(function(t,n){return Object(Ue["a"])({},t,Object(dn["a"])({},n.roleName,e.defaultRlsQualifiers))},{})};e.policies=[].concat(Object(pn["a"])(e.policies),[o]).sort(function(e,t){return e.id<t.id})}var Nr=kr;function _r(e,t){var n=e.policies.filter(function(e){return e.name!==t.policy.name});e.policies=[].concat(Object(pn["a"])(n),[t.policy]).sort(function(e,t){return e.id-t.id})}var xr=_r;function Sr(e,t){var n=e.policies.find(function(e){return e.name===t.name});if(n)throw new Error("A policy with this name already exists");var a=t.name,i=e.projectRoles,o={id:1e4*(new Date).getTime()+621355968e9,name:a,functionPolicyHeaderTemplate:e.functionPolicyHeaderTemplate,functionPolicyFooterTemplate:e.functionPolicyFooterTemplate,roleFunctionGrants:i.reduce(function(t,n){return Object(Ue["a"])({},t,Object(dn["a"])({},n.roleName,e.defaultFunctionRoleGrants))},{})};e.functionPolicies=[].concat(Object(pn["a"])(e.functionPolicies),[o]).sort(function(e,t){return e.id<t.id})}var Cr=Sr;function Tr(e,t){var n=e.functionPolicies.filter(function(e){return e.id!==t.policy.id});e.functionPolicies=[].concat(Object(pn["a"])(n),[t.policy]).sort(function(e,t){return e.id-t.id})}var Pr=Tr;function Dr(e,t,n){var a=e.managedSchemata.reduce(function(e,n){if(e.currentSchema)return e;var a=n.schemaFunctions.find(function(e){return e.id===t});return a?Object(Ue["a"])({},e,{currentSchema:n,currentFunction:a}):e},{currentSchema:null,currentFunction:null}),i=a.currentSchema,o=a.currentFunction,r=e.managedSchemata.filter(function(e){return e.id!==i.id}),l=i.schemaFunctions.filter(function(e){return e.id!==o.id});return e.managedSchemata=[].concat(Object(pn["a"])(r),[Object(Ue["a"])({},i,{schemaFunctions:[].concat(Object(pn["a"])(l),[Object(Ue["a"])({},o,{functionPolicyDefinitionId:n})])})]),e}function Or(e,t){var n=t.functionIds,a=t.policyDefinitionId;n.reduce(function(e,t){return Dr(e,t,a)},e)}var Fr=Or;function Er(e,t){var n=e.policies.find(function(e){return e.id===t.policyId}),a=e.policies.filter(function(e){return e.id!==t.policyId}),i=t.roleName,o=t.action,r=1e4*(new Date).getTime()+621355968e9,l={id:r,name:t.name||"rls_".concat(r),using:t.using||e.defaultRlsUsing,withCheck:t.withCheck||e.defaultRlsWithCheck,passStrategy:t.passStrategy||"permissive"},c=Object(Ue["a"])({},n,{rlsQualifiers:Object(Ue["a"])({},n.rlsQualifiers,Object(dn["a"])({},i,Object(Ue["a"])({},n.rlsQualifiers[i],Object(dn["a"])({},o,Object(Ue["a"])({},n.rlsQualifiers[i][o],{policies:[].concat(Object(pn["a"])(n.rlsQualifiers[i][o].policies),[l])})))))});e.policies=[].concat(Object(pn["a"])(a),[c])}var jr=Er;function Vr(e,t){var n=e.policies.find(function(e){return e.id===t.policyId}),a=e.policies.filter(function(e){return e.id!==t.policyId}),i=t.roleName,o=t.action,r=t.rlsPolicyId,l=Object(Ue["a"])({},n,{rlsQualifiers:Object(Ue["a"])({},n.rlsQualifiers,Object(dn["a"])({},i,Object(Ue["a"])({},n.rlsQualifiers[i],Object(dn["a"])({},o,Object(Ue["a"])({},n.rlsQualifiers[i][o],{policies:n.rlsQualifiers[i][o].policies.filter(function(e){return e.id!==r})})))))});e.policies=[].concat(Object(pn["a"])(a),[l])}var wr=Vr;function Rr(e,t){ro()(t.project).forEach(function(n){e[n]=t.project[n]})}var Ir=Rr;function Ar(e,t){var n=t.sourcePolicyDefinitionId,a=t.newFields,i=t.tableIds||[],o=e.policies.find(function(e){return e.id===n}),r=Object(Ue["a"])({},o,{id:1e4*(new Date).getTime()+621355968e9,name:a.name,customIdentifier:1===i.length?i[0]:null});e.policies=[].concat(Object(pn["a"])(e.policies),[r]).sort(function(e,t){return e.id<t.id}),e.managedSchemata=e.managedSchemata.map(function(e){return Object(Ue["a"])({},e,{schemaTables:e.schemaTables.map(function(e){return i.indexOf(e.id)>-1?Object(Ue["a"])({},e,{policyDefinitionId:r.id}):e})})})}var Gr=Ar;function $r(e,t){var n=t.policyDefinitionId,a=t.newFields,i=e.policies.find(function(e){return e.name===a.name});if(i)throw new Error("A policy with this name already exists");var o=e.policies.find(function(e){return e.id===n}),r=e.policies.filter(function(e){return e.id!==o.id}),l=Object(Ue["a"])({},o,{name:a.name,customIdentifier:null});e.policies=[].concat(Object(pn["a"])(r),[l]).sort(function(e,t){return e.id<t.id})}var qr=$r;function Br(e,t){var n=t.policyDefinitionId,a=e.policies.filter(function(e){return e.id!==n});e.policies=Object(pn["a"])(a).sort(function(e,t){return e.id<t.id}),e.managedSchemata=e.managedSchemata.map(function(t){return Object(Ue["a"])({},t,{schemaTables:t.schemaTables.map(function(t){return Object(Ue["a"])({},t,{policyDefinitionId:t.policyDefinitionId===n?e.defaultPolicy.id:t.policyDefinitionId})})})})}var Lr=Br;function Ur(e,t){e.tablePolicyTemplate=t.tablePolicyTemplate}var Mr=Ur,zr=n("83cd"),Qr=n.n(zr),Hr={resetDefaultState:ir,filterSchemata:rr,setManagedSchemata:cr,assignTablePolicy:dr,projectRoles:fr,selectedRoleFamilies:vr,defaultRlsUsing:hr,defaultRlsWithCheck:yr,newPolicy:Nr,savePolicy:xr,createRlsPolicy:jr,deleteRlsPolicy:wr,importProject:Ir,newFunctionPolicy:Cr,saveFunctionPolicy:Pr,assignFunctionPolicy:Fr,customizeTablePolicy:Gr,makeGlobalTablePolicy:qr,deleteTablePolicy:Lr,updateTablePolicyTemplate:Mr,updateDefaultRlsUsing:Qr.a};a["a"].use(ja["a"]);var Wr=new ja["a"].Store({plugins:[Object(tr["a"])()],state:nr,mutations:Hr,actions:{}});a["a"].use(ee["a"]);var Kr=new ee["a"]({scrollBehavior:function(e,t,n){return n||{x:0,y:0}},routes:[{path:"/",name:"home",component:re},{path:"/initialize",name:"initialize",component:Ne},{path:"/role-manager",name:"role-manager",component:Rn},{path:"/table-security-manager",name:"table-security-manager",component:Xa},{path:"/function-security-manager",name:"function-security-manager",component:wi},{path:"/search-view",name:"search-view",component:Wi},{path:"/fk-index-manager",name:"fk-index-manager",component:Lo},{path:"/smart-comment-manager",name:"smart-comment-manager",component:Wo},{path:"/settings",name:"settings",component:eo},{path:"/project-export",name:"project-export",component:er},{path:"/project-import",name:"project-import",component:he},{path:"/table/:id",name:"table",component:Ht,props:!0},{path:"/function/:id",name:"function",component:an,props:!0},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]});Kr.beforeEach(function(e,t,n){Wr.state.initializing&&"initialize"!==e.name&&Kr.push("initialize"),n()});var Xr=Kr,Jr=(n("96cf"),n("3b8d"),n("522d")),Yr=n("efe7");a["a"].use(Jr["a"]);var Zr="apollo-token",el=Object({NODE_ENV:"production",BASE_URL:"/pgdbi/"}).VUE_APP_GRAPHQL_HTTP||"/pgdbi/graphql",tl={httpEndpoint:el,tokenName:Zr,persisting:!1,websocketsOnly:!1,ssr:!1};function nl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Yr["createApolloClient"])(Object(Ue["a"])({},tl,e)),n=t.apolloClient,a=new Jr["a"]({defaultClient:n,defaultOptions:{$query:{}},errorHandler:function(e){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",e.message)}});return a}var al=n("4eb5"),il=n.n(al);a["a"].config.productionTip=!1,a["a"].use(il.a),new a["a"]({router:Xr,store:Wr,apolloProvider:nl(),render:function(e){return e(Z)}}).$mount("#app")},"77d3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},i=[],o=(n("7f7f"),n("cebc")),r=(n("28a5"),n("a4bb")),l=n.n(r),c=n("9dbb"),s=n.n(c),u="terse";var d={name:"FunctionComputerMixin",methods:{computePolicy:function(e,t,n){var a=l()(e.roleFunctionGrants).map(function(e){return{roleName:e}}),i="".concat(a.map(function(e){return e.roleName}).join(", ")),r=l()(e.roleFunctionGrants).reduce(function(t,n){return"ALLOWED"===e.roleFunctionGrants[n].execute?t.concat([{roleName:n}]):t},[]),c=l()(e.roleFunctionGrants).reduce(function(t,n){return"IMPLIED"===e.roleFunctionGrants[n].execute?t.concat([{roleName:n}]):t},[]),d=l()(e.roleFunctionGrants).reduce(function(t,n){return"DENIED"===e.roleFunctionGrants[n].execute?t.concat([{roleName:n}]):t},[]),f={verbose:!0,deniedRoleGrants:d,impliedRoleGrants:c},p=Object(o["a"])({},n,{policyName:e.name,allowedRoleGrants:r,revokeRolesList:i}),v=t===u?p:Object(o["a"])({},f,p);return s.a.render(m,v)}}},m="\n----------\n----------  BEGIN FUNCTION POLICY: {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}}\n----------  POLICY NAME:  {{policyName}}\n----------\n\n----------  REMOVE EXISTING FUNCTION GRANTS\n\n  revoke all privileges \n  on function {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}} \n  from public;\n\n  revoke all privileges \n  on function {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}} \n  from {{revokeRolesList}};\n\n----------  CREATE NEW FUNCTION GRANTS\n{{#allowedRoleGrants}}\n\n----------  {{roleName}}\n  grant \n  execute\n  on function {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}} \n  to {{roleName}};\n\n{{/allowedRoleGrants}}\n{{#verbose}}\n----------  IMPLIED FUNCTION GRANTS\n  {{#impliedRoleGrants}}\n  --IMPLIED:   grant execute on function {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}} to {{roleName}};\n  {{/impliedRoleGrants}}\n\n  ----------  DENIED TABLE GRANTS\n  {{#deniedRoleGrants}}\n  --DENIED:   grant execute on function {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}} to {{roleName}};\n  {{/deniedRoleGrants}}\n{{/verbose}}\n----------  END FUNCTION POLICY: {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{functionName}}{{^functionName}}{{=<% %>=}}{{functionName}}<%={{ }}=%>{{/functionName}}\n--==",f=d,p=n("2877"),v=Object(p["a"])(f,a,i,!1,null,null,null);t["a"]=v.exports},"7b59":function(e,t,n){"use strict";var a=n("8bda"),i=n.n(a);i.a},"82cd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{key:e.policyDefinition.id,attrs:{color:"black"}},[n("v-container",[n("v-toolbar",[n("h1",[e._v("Name: "+e._s(e.policyDefinition.name))]),n("v-spacer")],1),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"grants",attrs:{ripple:""}},[e._v("\n        Execution Grants\n      ")]),n("v-tab-item",{key:"grants"},[n("v-card",{attrs:{flat:""}},[n("policy-definition-grant-grid",{attrs:{policy:e.policyDefinition,disabled:e.disabled}})],1)],1),n("v-tab",{key:"policy-template",attrs:{ripple:""}},[e._v("\n        "+e._s(e.theFunction?"Policy":"Policy Template")+"\n      ")]),n("v-tab-item",{key:"policy-template"},[n("v-card",{attrs:{flat:""}},[n("policy-realization",{attrs:{policyDefinition:e.policyDefinition,theFunction:e.theFunction}})],1)],1)],1)],1)],1)},i=[],o=(n("7514"),n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.headers,items:e.grantMatrix,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.roleName))]),n("td",[n("v-checkbox",{attrs:{"input-value":e.roleGrantSelected(t.item,"execute"),disabled:e.roleGrantDisabled(t.item,"execute")},on:{click:function(n){return e.toggleRoleGrant(t.item.roleName,"execute")}}})],1)]}}])})}),r=[],l=n("bd86"),c=n("a4bb"),s=n.n(c),u=n("cebc"),d="ALLOWED",m="DENIED",f="IMPLIED",p={name:"FunctionPolicyDefinitionGrantGrid",props:{policy:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{policyStructure:[],calculatedPolicy:"NOT CALCULATED",toggleCompleted:!1}},watch:{},methods:{roleGrantSelected:function(e,t){return[d,f].indexOf(e[t])>-1},roleGrantDisabled:function(e,t){return e[t]===f||this.disabled},toggleRoleGrant:function(e,t){var n=this;if(!0!==this.toggleCompleted){var a=this.policy.roleFunctionGrants[e][t],i=this.projectRoles.filter(function(t){return void 0!==t.applicableRoles.find(function(t){return t.roleName===e})}).reduce(function(e,t){return e.concat(t.roleName)},[]),o=Object(u["a"])({},this.policy,{roleFunctionGrants:s()(this.policy.roleFunctionGrants).reduce(function(o,r){var c=i.indexOf(r)>-1,p=r===e;return Object(u["a"])({},o,Object(l["a"])({},r,s()(n.policy.roleFunctionGrants[r]).reduce(function(e,i){var o;n.policy.roleFunctionGrants[r][i];return o=i===t?p?a===d?m:d:c?a===d?m:f:n.policy.roleFunctionGrants[r][i]:"all"==i&&(c||p)&&a===d?m:n.policy.roleFunctionGrants[r][i],Object(u["a"])({},e,Object(l["a"])({},i,o))},{})))},{})});this.$store.commit("saveFunctionPolicy",{policy:o}),this.toggleCompleted=!0}else this.toggleCompleted=!1}},computed:{projectRoles:function(){return this.$store.state.projectRoles},grantMatrix:function(){var e=this;return s()(this.policy.roleFunctionGrants).map(function(t){return Object(u["a"])({},e.policy.roleFunctionGrants[t],{roleName:t})})},headers:function(){return[{text:"Role Name",sortable:!1},{text:"EXECUTE",sortable:!1}]}}},v=p,b=n("2877"),h=n("6544"),g=n.n(h),y=n("ac7c"),k=n("8fea"),N=Object(b["a"])(v,o,r,!1,null,null,null),_=N.exports;g()(N,{VCheckbox:y["a"],VDataTable:k["a"]});var x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-toolbar",[n("v-layout",{attrs:{"align-center":"","align-content-center":"","justify-center":"","justify-content-center":""}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.refresh}},a),[n("v-icon",[e._v("note_add")]),e._v("Refresh")],1)]}}])},[n("span",[e._v("Refresh")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.expand}},a),[n("v-icon",[e._v("note_add")]),e._v("Expand")],1)]}}])},[n("span",[e._v("Expand")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.computedPolicy,expression:"computedPolicy",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{hidden:!e.theFunction}},a),[n("v-icon",[e._v("file_copy")]),e._v("Copy\n        ")],1)]}}])},[n("span",[e._v("Copy")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{hidden:!e.theFunction},on:{click:e.executeSql}},a),[n("v-icon",[e._v("arrow_forward")]),e._v("Execute")],1)]}}])},[n("span",[e._v("Execute")])]),n("v-spacer"),n("v-radio-group",{attrs:{row:""},model:{value:e.policyReadability,callback:function(t){e.policyReadability=t},expression:"policyReadability"}},[n("v-radio",{key:"terse",attrs:{label:"Terse",value:"terse"}}),n("v-radio",{key:"verbose",attrs:{label:"Verbose",value:"verbose"}})],1)],1)],1),n("v-textarea",{attrs:{value:e.computedPolicy,"auto-grow":"","hide-details":"","background-color":"black",disabled:""}})],1)},S=[],C=(n("7f7f"),n("77d3")),T=n("4eb5"),P=n.n(T),D={name:"FunctionDefinition",mixins:[C["a"],P.a],components:{},props:{policyDefinition:{type:Object,required:!0},theFunction:{type:Object,required:!1}},data:function(){return{policyStructure:[],policyReadability:"terse",computedPolicy:"N/A"}},mounted:function(){this.doComputePolicy()},watch:{policyDefinition:function(){this.doComputePolicy()},policyReadability:function(){this.doComputePolicy()}},methods:{refresh:function(){this.doComputePolicy()},expand:function(){this.computedPolicy="".concat(this.computedPolicy," ")},doComputePolicy:function(){var e=this.theFunction?{schemaName:this.theFunction.functionSchema,functionName:this.theFunction.name}:null;this.computedPolicy=this.computePolicy(this.policyDefinition,this.policyReadability,e)},onCopy:function(e){alert("Copied!")},onError:function(e){alert("Failed to copy texts")},executeSql:function(){alert("not implemented:  server config value will expose graphile extension to execute generated script")}},computed:{}},O=D,F=n("8336"),E=n("a523"),j=n("132d"),V=n("a722"),w=n("67b6"),R=n("43a6"),I=n("9910"),A=n("a844"),G=n("71d9"),$=n("3a2f"),q=Object(b["a"])(O,x,S,!1,null,null,null),B=q.exports;g()(q,{VBtn:F["a"],VContainer:E["a"],VIcon:j["a"],VLayout:V["a"],VRadio:w["a"],VRadioGroup:R["a"],VSpacer:I["a"],VTextarea:A["a"],VToolbar:G["a"],VTooltip:$["a"]});var L={name:"FunctionPolicyDefinition",components:{PolicyDefinitionGrantGrid:_,PolicyRealization:B},props:{policyId:{type:Number,required:!0},theFunction:{type:Object,required:!1}},data:function(){return{calculatedPolicy:"NOT CALCULATED",toggleCompleted:!1,activeTab:""}},mounted:function(){},watch:{},methods:{},computed:{disabled:function(){return null!==this.theFunction&&void 0!==this.theFunction||this.policyDefinition.id===this.$store.state.defaultFunctionPolicy.id},policyDefinition:function(){var e=this,t=(this.$store.state.functionPolicies,this.$store.state.functionPolicies.find(function(t){return t.id===e.policyId}));return t}}},U=L,M=n("b0af"),z=n("71a3"),Q=n("c671"),H=n("fe57"),W=Object(b["a"])(U,a,i,!1,null,null,null);t["a"]=W.exports;g()(W,{VCard:M["a"],VContainer:E["a"],VSpacer:I["a"],VTab:z["a"],VTabItem:Q["a"],VTabs:H["a"],VToolbar:G["a"]})},"83cd":function(e,t){function n(e,t){e.defaultRlsUsing=t.defaultRlsUsing}e.exports=n},"861c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{key:e.policyDefinition.id,attrs:{color:"black"}},[n("v-container",[n("v-toolbar",[n("h1",[e._v("Name: "+e._s(e.policyDefinition.name))]),n("v-spacer"),n("v-layout",{attrs:{"justify-center":""}},[n("v-checkbox",{attrs:{label:"Enable Rls",disabled:e.disabled},model:{value:e.enableRls,callback:function(t){e.enableRls=t},expression:"enableRls"}})],1),e.showMakeGlobalButton?n("table-policy-make-global-dialog",{attrs:{policyDefinition:e.policyDefinition}}):e._e(),e.showDeleteButton?n("table-policy-delete-dialog",{attrs:{policyDefinition:e.policyDefinition}}):e._e()],1),n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"grants",attrs:{ripple:""}},[e._v("\n        Table Grants\n      ")]),n("v-tab-item",{key:"grants",attrs:{lazy:""}},[n("v-card",{attrs:{flat:""}},[n("table-policy-definition-grants",{attrs:{policyDefinition:e.policyDefinition,disabled:e.disabled}})],1)],1),n("v-tab",{key:"rls",attrs:{ripple:"",disabled:!e.enableRls}},[e._v("\n        Row Level Security\n      ")]),n("v-tab-item",{key:"rls",attrs:{lazy:""}},[n("v-card",{attrs:{flat:""}},[n("policy-rls-qualifier-grid",{attrs:{policy:e.policyDefinition,disabled:e.disabled}})],1)],1),n("v-tab",{key:"policy-template",attrs:{ripple:""}},[e._v("\n        "+e._s(e.table?"Policy":"Policy Template")+"\n      ")]),n("v-tab-item",{key:"policy-template",attrs:{lazy:""}},[n("v-card",{attrs:{flat:""}},[n("policy-realization",{attrs:{policyDefinition:e.policyDefinition,table:e.table,enableRls:e.enableRls}})],1)],1),e.table?n("v-tab",{key:"policy-evaluation",attrs:{ripple:""}},[e._v("\n        Evaluation\n      ")]):e._e(),e.table?n("v-tab-item",{key:"policy-evaluation",attrs:{lazy:""}},[n("v-card",{attrs:{flat:""}},[n("table-policy-evaluator-detail",{attrs:{policyDefinition:e.policyDefinition,table:e.table}})],1)],1):e._e()],1)],1)],1)},i=[],o=(n("7514"),n("7f7f"),n("cebc")),r=(n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tabs",{attrs:{dark:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("v-tab",{key:"grants",attrs:{ripple:""}},[e._v("\n    Role Grants\n  ")]),n("v-tab-item",{key:"grants",attrs:{lazy:""}},[n("v-card",{attrs:{flat:""}},[n("table-policy-definition-grant-grid",{attrs:{policyDefinition:e.policyDefinition,disabled:e.disabled}})],1)],1),n("v-tab",{key:"exclusions",attrs:{ripple:"",disabled:e.disabled}},[e._v("\n    Column Exclusions\n  ")]),n("v-tab-item",{key:"exclusions",attrs:{lazy:""}},[n("v-card",{attrs:{flat:""}},[n("table-policy-definition-column-exclusions",{attrs:{policyDefinition:e.policyDefinition,table:e.table,disabled:e.disabled}})],1)],1)],1)}),l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.headers,items:e.grantMatrix,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.roleName))]),n("td",[n("v-checkbox",{attrs:{"input-value":e.roleGrantSelected(t.item,"select"),disabled:e.roleGrantDisabled(t.item,"select")},on:{click:function(n){return e.toggleRoleGrant(t.item.roleName,"select")}}})],1),n("td",[n("v-checkbox",{attrs:{"input-value":e.roleGrantSelected(t.item,"insert"),disabled:e.roleGrantDisabled(t.item,"insert")},on:{click:function(n){return e.toggleRoleGrant(t.item.roleName,"insert")}}})],1),n("td",[n("v-checkbox",{attrs:{"input-value":e.roleGrantSelected(t.item,"update"),disabled:e.roleGrantDisabled(t.item,"update")},on:{click:function(n){return e.toggleRoleGrant(t.item.roleName,"update")}}})],1),n("td",[n("v-checkbox",{attrs:{"input-value":e.roleGrantSelected(t.item,"delete"),disabled:e.roleGrantDisabled(t.item,"delete")},on:{click:function(n){return e.toggleRoleGrant(t.item.roleName,"delete")}}})],1)]}}])})},s=[],u=n("bd86"),d=n("a4bb"),m=n.n(d),f="ALLOWED",p="DENIED",v="IMPLIED",b={name:"PolicyDefinitionGrantGrid",props:{policyDefinition:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{policyStructure:[],calculatedPolicy:"NOT CALCULATED",toggleCompleted:!1}},watch:{},methods:{roleGrantSelected:function(e,t){return[f,v].indexOf(e[t])>-1},roleGrantDisabled:function(e,t){return e[t]===v||this.disabled},toggleRoleGrant:function(e,t){var n=this;if(!0!==this.toggleCompleted){var a=this.policyDefinition.roleGrants[e][t],i=this.projectRoles.filter(function(t){return void 0!==(t.applicableRoles||[]).find(function(t){return t.roleName===e})}).reduce(function(e,t){return e.concat(t.roleName)},[]),r=Object(o["a"])({},this.policyDefinition,{roleGrants:m()(this.policyDefinition.roleGrants).reduce(function(r,l){var c=i.indexOf(l)>-1,s=l===e;return Object(o["a"])({},r,Object(u["a"])({},l,m()(n.policyDefinition.roleGrants[l]).reduce(function(e,i){var r;n.policyDefinition.roleGrants[l][i];return r=i===t?s?a===f?p:f:c?a===f?p:v:n.policyDefinition.roleGrants[l][i]:"all"==i&&(c||s)&&a===f?p:n.policyDefinition.roleGrants[l][i],Object(o["a"])({},e,Object(u["a"])({},i,r))},{})))},{})});this.$store.commit("savePolicy",{policy:r}),this.toggleCompleted=!0}else this.toggleCompleted=!1}},computed:{projectRoles:function(){return this.$store.state.projectRoles},grantMatrix:function(){var e=this;return m()(this.policyDefinition.roleGrants).map(function(t){return Object(o["a"])({},e.policyDefinition.roleGrants[t],{roleName:t})})},headers:function(){return[{text:"Role Name",sortable:!1},{text:"SELECT",sortable:!1},{text:"INSERT",sortable:!1},{text:"UPDATE",sortable:!1},{text:"DELETE",sortable:!1}]}}},h=b,g=n("2877"),y=n("6544"),k=n.n(y),N=n("ac7c"),_=n("8fea"),x=Object(g["a"])(h,c,s,!1,null,null,null),S=x.exports;k()(x,{VCheckbox:N["a"],VDataTable:_["a"]});var C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"justify-start":""}},[n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.headers,items:e.dataTableItems,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.roleName))]),n("td",[n("column-exclusion-set",{attrs:{policyDefinition:e.policyDefinition,table:e.table,action:"insert",roleName:t.item.roleName}})],1),n("td",[n("column-exclusion-set",{attrs:{policyDefinition:e.policyDefinition,table:e.table,action:"update",roleName:t.item.roleName}})],1)]}}])})],1)},T=[],P=n("75fc"),D=(n("2f62"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-checkbox",{attrs:{hidden:e.overrideHidden,label:"override implied exclusions"},model:{value:e.overrideActive,callback:function(t){e.overrideActive=t},expression:"overrideActive"}}),e.showDialogButton?n("table-policy-column-exclusion-dialog",{attrs:{policyDefinition:e.policyDefinition,table:e.table,action:e.action,roleName:e.roleName}}):e._e(),n("v-list",e._l(e.currentColumnExclusions,function(t){return n("v-list-tile",{key:t},[n("v-btn",{on:{click:function(n){return e.removeColumnExclusion(t)}}},[n("v-icon",[e._v("clear")])],1),e._v(" "+e._s(t)+"\n      ")],1)}),1)],1)}),O=[],F=n("650f"),E=n.n(F),j=n("7618"),V=(n("6b54"),n("a8db")),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",hidden:e.hidden,disabled:e.disabled}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Exclude Column")]),n("v-text-field",{model:{value:e.columnName,callback:function(t){e.columnName=t},expression:"columnName"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{on:{click:e.addColumnExclusion}},[e._v("Exclude")]),n("v-spacer")],1)],1)],1)],1)},R=[],I=(n("cadf"),n("551c"),n("f751"),n("097d"),{name:"TablePolicyColumnExclusionDialog",props:{policyDefinition:{type:Object,required:!0},table:{type:Object,required:!1},action:{type:String,required:!0},roleName:{type:String,required:!0},disabled:{type:Boolean,required:!1}},data:function(){return{dialog:!1,columnName:""}},computed:{displayValue:function(){return"New ".concat(this.action," exclusion")},hidden:function(){return"DENIED"===this.policyDefinition.roleGrants[this.roleName][this.action]}},watch:{},methods:{addColumnExclusion:function(){var e=this;this.dialog=!1;var t=(this.policyDefinition.columnExclusions[this.action][this.roleName]||[]).filter(function(t){return t!==e.columnName}).concat([this.columnName]);try{this.$store.commit("savePolicy",{policy:Object(o["a"])({},this.policyDefinition,{columnExclusions:Object(o["a"])({},this.policyDefinition.columnExclusions,Object(u["a"])({},this.action,Object(o["a"])({},this.policyDefinition.columnExclusions[this.action],Object(u["a"])({},this.roleName,t))))})})}catch(n){alert(n.toString()),console.error(n)}}}}),A=I,G=(n("c2d7"),n("8336")),$=n("b0af"),q=n("99d9"),B=n("12b2"),L=n("169a"),U=n("9910"),M=n("2677"),z=Object(g["a"])(A,w,R,!1,null,null,null),Q=z.exports;function H(e){var t=W(e,"string");return"symbol"===Object(j["a"])(t)?t:String(t)}function W(e,t){if("object"!==Object(j["a"])(e)||null===e)return e;var n=e[E.a];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==Object(j["a"])(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}k()(z,{VBtn:G["a"],VCard:$["a"],VCardActions:q["a"],VCardTitle:B["a"],VDialog:L["a"],VSpacer:U["a"],VTextField:M["a"]});var K={name:"ColumnExclusionSet",components:{TablePolicyColumnExclusionDialog:Q},props:{policyDefinition:{type:Object,required:!0},table:{type:Object,required:!1},action:{type:String,required:!0},roleName:{type:String,required:!0}},data:function(){return{toggleCompleted:!1,overrideActive:!1}},watch:{overrideActive:function(){var e,t=this,n=this.policyDefinition.columnExclusionOverrides[this.action].filter(function(e){return e!==t.roleName}),a=this.overrideActive?n.concat(this.roleName):n;if(this.overrideActive)e=this.policyDefinition.columnExclusions[this.action];else{var i=this.policyDefinition.columnExclusions[this.action];i[this.roleName],Object(V["a"])(i,[this.roleName].map(H))}try{this.$store.commit("savePolicy",{policy:Object(o["a"])({},this.policyDefinition,{columnExclusionOverrides:Object(o["a"])({},this.policyDefinition.columnExclusionOverrides,Object(u["a"])({},this.action,a)),columnExclusions:Object(o["a"])({},this.policyDefinition.columnExclusions,Object(u["a"])({},this.action,e||{}))})})}catch(r){alert(r.toString()),console.error(r)}}},methods:{removeColumnExclusion:function(e){var t=this.policyDefinition.columnExclusions[this.action][this.roleName].filter(function(t){return t!==e});try{this.$store.commit("savePolicy",{policy:Object(o["a"])({},this.policyDefinition,{columnExclusions:Object(o["a"])({},this.policyDefinition.columnExclusions,Object(u["a"])({},this.action,Object(o["a"])({},this.policyDefinition.columnExclusions[this.action],Object(u["a"])({},this.roleName,t))))})})}catch(n){alert(n.toString()),console.error(n)}}},mounted:function(){this.overrideActive=this.policyDefinition.columnExclusionOverrides[this.action].indexOf(this.roleName)>-1},computed:{currentColumnExclusions:function(){return(this.policyDefinition.columnExclusions[this.action]||[])[this.roleName]},disabled:function(){return"DENIED"===this.policyDefinition.roleGrants[this.roleName][this.action]},overrideHidden:function(){return["DENIED","ALLOWED"].indexOf(this.policyDefinition.roleGrants[this.roleName][this.action])>-1},showDialogButton:function(){return this.overrideActive&&"IMPLIED"===this.policyDefinition.roleGrants[this.roleName][this.action]||"ALLOWED"===this.policyDefinition.roleGrants[this.roleName][this.action]}}},X=K,J=n("a523"),Y=n("132d"),Z=n("8860"),ee=n("ba95"),te=Object(g["a"])(X,D,O,!1,null,null,null),ne=te.exports;k()(te,{VBtn:G["a"],VCheckbox:N["a"],VContainer:J["a"],VIcon:Y["a"],VList:Z["a"],VListTile:ee["a"]});var ae={name:"PolicyDefinitionColumnExclusions",components:{ColumnExclusionSet:ne},props:{policyDefinition:{type:Object,required:!0},table:{type:Object,required:!1},disabled:{type:Boolean,default:!1}},data:function(){return{toggleComplete:!1,headers:[{text:"Column Name",sortable:!1},{text:"Insert Exclusions",sortable:!1},{text:"Update Exclusions",sortable:!1}]}},watch:{},methods:{removeInsertExclusion:function(e,t){console.log("columnExclusion",e,t)}},computed:{projectRoles:function(){return this.$store.state.projectRoles},dataTableItems:function(){var e=this;return m()(this.policyDefinition.roleGrants).reduce(function(t,n){var a=(e.policyDefinition.columnExclusions.insert||[])[n]||[],i=(e.policyDefinition.columnExclusions.update||[])[n]||[];return[].concat(Object(P["a"])(t),[{roleName:n,insertColumnExclusions:a,updateColumnExclusions:i}])},[])}}},ie=ae,oe=Object(g["a"])(ie,C,T,!1,null,null,null),re=oe.exports;k()(oe,{VContainer:J["a"],VDataTable:_["a"]});var le={name:"PolicyDefinitionGrants",components:{TablePolicyDefinitionGrantGrid:S,TablePolicyDefinitionColumnExclusions:re},props:{policyDefinition:{type:Object,required:!0},table:{type:Object,required:!1},disabled:{type:Boolean,default:!1}},data:function(){return{activeTab:null}},watch:{},methods:{},computed:{}},ce=le,se=n("71a3"),ue=n("c671"),de=n("fe57"),me=Object(g["a"])(ce,r,l,!1,null,null,null),fe=me.exports;k()(me,{VCard:$["a"],VTab:se["a"],VTabItem:ue["a"],VTabs:de["a"]});var pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"text-sm-left",attrs:{headers:e.headers,items:e.rlsQualifierMatrix,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",[e._v(e._s(t.item.roleName))]),e._l(["all","select","insert","update","delete"],function(a){return n("td",{key:a},[n("v-btn",{attrs:{hidden:e.disabled},on:{click:function(n){return e.addRlsPolicy(t.item.roleName,a)}}},[e._v("Add Policy")]),e._l(t.item[a].policies,function(i){return n("rls-policy-dialog",{key:i.roleName+"-"+i.id,attrs:{action:a,roleName:t.item.roleName,rlsPolicy:i,status:"ENABLED",disableRlsPolicy:e.disableRlsPolicy,updateRlsPolicy:e.updateRlsPolicy,disabled:e.disabled}})}),e._l(e.impliedPolicies(t.item.roleName,a),function(i){return n("rls-policy-dialog",{key:i.roleName+"-"+i.id,attrs:{action:a,roleName:t.item.roleName,rlsPolicy:i,status:"IMPLIED",disableRlsPolicy:e.disableRlsPolicy,updateRlsPolicy:e.updateRlsPolicy,disabled:e.disabled}})})],2)})]}}])})},ve=[],be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"1400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",disabled:e.btnDisabled,hidden:e.hidden},on:{click:e.activate}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Rls Policy")]),n("v-text-field",{attrs:{label:"Name",disabled:e.disabled},model:{value:e.currentName,callback:function(t){e.currentName=t},expression:"currentName"}}),n("v-radio-group",{attrs:{column:!1,disabled:e.disabled},model:{value:e.currentPassStrategy,callback:function(t){e.currentPassStrategy=t},expression:"currentPassStrategy"}},[n("v-radio",{attrs:{label:"Permissive",value:"permissive"}}),n("v-radio",{attrs:{label:"Restrictive",value:"restrictive"}})],1),n("v-text-field",{attrs:{label:"Using",disabled:e.disabled},model:{value:e.currentUsing,callback:function(t){e.currentUsing=t},expression:"currentUsing"}}),n("v-text-field",{attrs:{label:"With Check",disabled:e.disabled},model:{value:e.currentWithCheck,callback:function(t){e.currentWithCheck=t},expression:"currentWithCheck"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{hidden:e.disabled},on:{click:function(t){e.updateRlsPolicy(e.roleName,e.action,e.rlsPolicy.id,e.currentUsing,e.currentWithCheck,e.currentPassStrategy,e.currentName),e.dialog=!1}}},[e._v("Update")]),n("v-btn",{attrs:{hidden:e.disabled},on:{click:function(t){e.disableRlsPolicy(e.roleName,e.action,e.rlsPolicy.id),e.dialog=!1}}},[e._v("Disable")]),n("v-btn",{attrs:{hidden:e.disabled},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{hidden:!e.disabled},on:{click:function(t){e.dialog=!1}}},[e._v("OK")]),n("v-spacer")],1)],1)],1)],1)},he=[],ge="DISABLED",ye="IMPLIED",ke={name:"RlsPolicyDialog",props:{disabled:{type:Boolean,default:!1},status:{type:String,required:!0},rlsPolicy:{type:Object,required:!0},action:{type:String,required:!0},roleName:{type:String,required:!0},disableRlsPolicy:{type:Function,required:!0},updateRlsPolicy:{type:Function,required:!0}},data:function(){return{toggleCompleted:!1,dialog:!1,currentName:"n/a",currentUsing:"n/a",currentWithCheck:"n/a",currentPassStrategy:!1}},computed:{displayValue:function(){return this.rlsPolicy.name},rlsQualifierDisplayValueDisabled:function(){return!1},hidden:function(){return!1},btnDisabled:function(){return[ge,ye].indexOf(this.status)>-1}},watch:{},methods:{activate:function(){this.currentName=this.rlsPolicy.name,this.currentUsing=this.rlsPolicy.using,this.currentWithCheck=this.rlsPolicy.withCheck,this.currentPassStrategy=this.rlsPolicy.passStrategy}}},Ne=ke,_e=(n("dbdb9"),n("67b6")),xe=n("43a6"),Se=Object(g["a"])(Ne,be,he,!1,null,null,null),Ce=Se.exports;k()(Se,{VBtn:G["a"],VCard:$["a"],VCardActions:q["a"],VCardTitle:B["a"],VDialog:L["a"],VRadio:_e["a"],VRadioGroup:xe["a"],VSpacer:U["a"],VTextField:M["a"]});var Te="ENABLED",Pe="DISABLED",De="IMPLIED",Oe={name:"PolicyRlsQualifierGrid",components:{RlsPolicyDialog:Ce},props:{policy:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{toggleCompleted:!1,dialog:!1,currentUsing:"n/a",currentWithCheck:"n/a"}},watch:{},methods:{impliedPolicies:function(e,t){var n=this,a=this.projectRoles.find(function(t){return t.roleName===e}).applicableRoles.reduce(function(e,t){return e.concat(t.roleName)},[]).concat([e]),i=a.reduce(function(a,i){return i!==e?"all"===t?a.concat(n.policy.rlsQualifiers[i][t].policies):a.concat(n.policy.rlsQualifiers[i][t].policies).concat(n.policy.rlsQualifiers[i].all.policies):"all"===t?a:a.concat(n.policy.rlsQualifiers[i].all.policies)},[]);return i},addRlsPolicy:function(e,t){this.$store.commit("createRlsPolicy",{policyId:this.policy.id,roleName:e,action:t})},disableRlsPolicy:function(e,t,n){this.$store.commit("deleteRlsPolicy",{policyId:this.policy.id,roleName:e,action:t,rlsPolicyId:n})},updateRlsPolicy:function(e,t,n,a,i,r,l){var c=this.policy.rlsQualifiers[e][t].policies.filter(function(e){return e.id!==n}).concat([{id:n,using:a,withCheck:i,passStrategy:r,name:l}]),s=Object(o["a"])({},this.policy,{rlsQualifiers:Object(o["a"])({},this.policy.rlsQualifiers,Object(u["a"])({},e,Object(o["a"])({},this.policy.rlsQualifiers[e],Object(u["a"])({},t,{status:this.policy.rlsQualifiers[e][t].status,policies:c,using:a,withCheck:i,passStrategy:r}))))});this.$store.commit("savePolicy",{policy:s})},rlsQualifierCheckLabel:function(e,t){switch(e[t].status){case Te:return"Add Policy";case Pe:return"Enable";case De:return"Add Policy"}}},computed:{projectRoles:function(){return this.$store.state.projectRoles},defaultRLSQual:function(){return this.$store.state.defaultRLSQual},rlsQualifierMatrix:function(){var e=this;return m()(this.policy.rlsQualifiers).map(function(t){return Object(o["a"])({},e.policy.rlsQualifiers[t],{roleName:t})})},headers:function(){return[{text:"Role Name",sortable:!1},{text:"ALL",sortable:!1},{text:"SELECT",sortable:!1},{text:"INSERT",sortable:!1},{text:"UPDATE",sortable:!1},{text:"DELETE",sortable:!1}]}}},Fe=Oe,Ee=(n("065f"),Object(g["a"])(Fe,pe,ve,!1,null,null,null)),je=Ee.exports;k()(Ee,{VBtn:G["a"],VDataTable:_["a"]});var Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-toolbar",[n("v-layout",{attrs:{"align-center":"","align-content-center":"","justify-center":"","justify-content-center":""}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.refresh}},a),[n("v-icon",[e._v("note_add")]),e._v("Refresh")],1)]}}])},[n("span",[e._v("Refresh")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({on:{click:e.expand}},a),[n("v-icon",[e._v("note_add")]),e._v("Expand")],1)]}}])},[n("span",[e._v("Expand")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.computedPolicy,expression:"computedPolicy",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{hidden:!e.table}},a),[n("v-icon",[e._v("file_copy")]),e._v("Copy\n        ")],1)]}}])},[n("span",[e._v("Copy")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{hidden:!e.table},on:{click:e.executeSql}},a),[n("v-icon",[e._v("arrow_forward")]),e._v("Execute")],1)]}}])},[n("span",[e._v("Execute")])]),n("v-spacer"),n("v-radio-group",{attrs:{row:""},model:{value:e.policyReadability,callback:function(t){e.policyReadability=t},expression:"policyReadability"}},[n("v-radio",{key:"terse",attrs:{label:"Terse",value:"terse"}}),n("v-radio",{key:"verbose",attrs:{label:"Verbose",value:"verbose"}})],1)],1)],1),n("v-textarea",{attrs:{value:e.computedPolicy,"auto-grow":"","hide-details":"","background-color":"black",disabled:""}})],1)},we=[],Re=n("ee5d"),Ie=n("4eb5"),Ae=n.n(Ie),Ge={name:"PolicyDefinition",mixins:[Re["a"],Ae.a],components:{},props:{policyDefinition:{type:Object,required:!0},table:{type:Object,required:!1},enableRls:{type:Boolean,required:!0}},data:function(){return{policyStructure:[],policyReadability:"terse",computedPolicy:"N/A"}},mounted:function(){this.doComputePolicy()},watch:{policyReadability:function(){this.doComputePolicy()},enableRls:function(){this.doComputePolicy()},policyDefinition:function(){this.doComputePolicy()}},methods:{refresh:function(){this.doComputePolicy()},expand:function(){this.computedPolicy="".concat(this.computedPolicy," ")},doComputePolicy:function(){var e=null;this.table&&(e={schemaName:this.table.tableSchema,tableName:this.table.name}),this.computedPolicy=this.computePolicy(this.policyDefinition,this.policyReadability,e,this.table)},onCopy:function(e){alert("Copied!")},onError:function(e){alert("Failed to copy texts")},executeSql:function(){alert("not implemented:  server config value will expose graphile extension to execute generated script")}},computed:{}},$e=Ge,qe=n("a722"),Be=n("a844"),Le=n("71d9"),Ue=n("3a2f"),Me=Object(g["a"])($e,Ve,we,!1,null,null,null),ze=Me.exports;k()(Me,{VBtn:G["a"],VContainer:J["a"],VIcon:Y["a"],VLayout:qe["a"],VRadio:_e["a"],VRadioGroup:xe["a"],VSpacer:U["a"],VTextarea:Be["a"],VToolbar:Le["a"],VTooltip:Ue["a"]});var Qe=n("bd5a"),He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",disabled:e.disabled}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Make Custom Policy Available Globally")]),n("v-text-field",{model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{on:{click:e.makeGlobal}},[e._v("Make Global")]),n("v-spacer")],1)],1)],1)],1)},We=[],Ke={name:"TablePolicyMakeGlobalDialog",props:{policyDefinition:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},data:function(){return{dialog:!1,customName:"New Table Policy"}},computed:{displayValue:function(){return"Make Global"}},watch:{},methods:{makeGlobal:function(){this.dialog=!1;try{this.$store.commit("makeGlobalTablePolicy",{policyDefinitionId:this.policyDefinition.id,newFields:{name:this.customName}})}catch(e){alert(e.toString()),console.error(e)}}}},Xe=Ke,Je=(n("cfbf"),Object(g["a"])(Xe,He,We,!1,null,null,null)),Ye=Je.exports;k()(Je,{VBtn:G["a"],VCard:$["a"],VCardActions:q["a"],VCardTitle:B["a"],VDialog:L["a"],VSpacer:U["a"],VTextField:M["a"]});var Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",disabled:e.disabled}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Delete Policy")]),n("h1",[e._v("Are you sure you want to delete this policy?")]),n("h2",[e._v("Any tables currently assigned this policy will revert to:")]),n("h2",[e._v("Default Policy - NO ACCESS")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{disabled:e.deleteDisabled},on:{click:e.deleteTablePolicyDefinition}},[e._v("Delete")]),n("v-spacer")],1)],1)],1)],1)},et=[],tt={name:"TablePolicyDeleteDialog",props:{policyDefinition:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},mounted:function(){},data:function(){return{dialog:!1}},computed:{displayValue:function(){return"Delete"},allPolicyDefinitions:function(){return this.$store.state.policies.filter(function(e){return!e.customIdentifier})},deleteDisabled:function(){return!1}},watch:{},methods:{deleteTablePolicyDefinition:function(){this.dialog=!1,this.$store.commit("deleteTablePolicy",{policyDefinitionId:this.policyDefinition.id})}}},nt=tt,at=(n("fb68"),Object(g["a"])(nt,Ze,et,!1,null,null,null)),it=at.exports;k()(at,{VBtn:G["a"],VCard:$["a"],VCardActions:q["a"],VCardTitle:B["a"],VDialog:L["a"],VSpacer:U["a"]});var ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-textarea",{attrs:{value:e.tablePolicyEval,"auto-grow":"","hide-details":"","background-color":"black",disabled:""}}),n("v-data-table",{attrs:{headers:e.headers,items:e.tablePolicyEvaluationItems,"hide-actions":"","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[e._v("\n          "+e._s(t.item.roleName)+"\n        ")]),n("td",[e._v("\n          "+e._s(t.item.action)+"\n        ")]),n("td",[e._v("\n          "+e._s(t.item.status)+"\n        ")])])]}}])})],1)},rt=[],lt=n("f499"),ct=n.n(lt),st=n("e002"),ut={name:"TablePolicyEvaluatorDetail",mixins:[st["a"]],props:{},mounted:function(){},data:function(){return{headers:[{text:"roleName",sortable:!1},{text:"action",sortable:!1},{text:"status",sortable:!1}]}},computed:{tablePolicyEval:function(){return ct()(this.tablePolicyEvaluation,0,2)},tablePolicyEvaluationItems:function(){var e=this;return m()(this.tablePolicyEvaluation).reduce(function(t,n){return[].concat(Object(P["a"])(t),Object(P["a"])(e.tablePolicyEvaluation[n].map(function(e){return Object(o["a"])({},e,{id:"".concat(e.roleName,"-").concat(e.action),status:n})})))},[])}}},dt=ut,mt=(n("7b59"),Object(g["a"])(dt,ot,rt,!1,null,null,null)),ft=mt.exports;k()(mt,{VContainer:J["a"],VDataTable:_["a"],VTextarea:Be["a"]});var pt={name:"PolicyDefinition",components:{PolicyRlsQualifierGrid:je,PolicyRealization:ze,TablePolicyCustomizeDialog:Qe["a"],TablePolicyMakeGlobalDialog:Ye,TablePolicyDeleteDialog:it,TablePolicyEvaluatorDetail:ft,TablePolicyDefinitionGrants:fe},props:{policyId:{type:Number,required:!0},table:{type:Object,required:!1}},data:function(){return{enableRls:!0,policyStructure:[],calculatedPolicy:"NOT CALCULATED",toggleCompleted:!1,activeTab:""}},mounted:function(){this.enableRls=this.policyDefinition.enableRls},watch:{policyDefinition:function(){this.enableRls=this.policyDefinition.enableRls},enableRls:function(){this.$store.commit("savePolicy",{policy:Object(o["a"])({},this.policyDefinition,{enableRls:this.enableRls})})}},methods:{customize:function(){"".concat(this.table.name," Custom Policy")}},computed:{showDeleteButton:function(){return this.policyDefinition.id!==this.$store.state.defaultPolicy.id},showMakeGlobalButton:function(){return void 0!==this.policyDefinition.customIdentifier&&null!==this.policyDefinition.customIdentifier},showCustomizeButton:function(){return!!this.table&&!this.policyDefinition.customIdentifier},disabled:function(){var e=this.policyDefinition.id===this.$store.state.defaultPolicy.id,t=null!==this.table&&void 0!==this.table,n=!!this.policyDefinition.customIdentifier;return!!e||!!t&&!n},policyDefinition:function(){var e=this,t=(this.$store.state.policies,this.$store.state.policies.find(function(t){return t.id===e.policyId}));return t}}},vt=pt,bt=Object(g["a"])(vt,a,i,!1,null,null,null);t["a"]=bt.exports;k()(bt,{VCard:$["a"],VCheckbox:N["a"],VContainer:J["a"],VLayout:qe["a"],VSpacer:U["a"],VTab:se["a"],VTabItem:ue["a"],VTabs:de["a"],VToolbar:Le["a"]})},"8bda":function(e,t,n){},"90d0":function(e,t,n){},9270:function(e,t,n){},9498:function(e,t,n){"use strict";var a=n("9270"),i=n.n(a);i.a},"95fb":function(e,t,n){"use strict";(function(e){n("55dd"),n("6b54");var a=n("861c");t["a"]={name:"PolicyManager",components:{PolicyDefinition:a["a"]},methods:{saveNewPolicy:function(){try{this.$store.commit("newPolicy",{name:this.newPolicyName})}catch(e){alert(e.toString()),console.error(e)}this.dialog=!1}},computed:{policies:function(){return this.$store.state.policies.sort(function(e,t){return e.id<t.id?-1:1})}},data:function(){return{dialog:!1,newPolicyName:"New Table Policy",headers:[{text:"",sortable:!1},{text:"ID",sortable:!1},{text:"Name",sortable:!1}]}},mounted:function(){e.client&&window&&(window.history.scrollRestoration="auto")}}}).call(this,n("4362"))},9849:function(e,t,n){"use strict";var a=n("b4ca"),i=n.n(a);i.a},"9e46":function(e,t,n){},a6c0:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetDbSchemaList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allSchemata"},arguments:[{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"EnumValue",value:"SCHEMA_NAME_ASC"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:125}};n.loc.source={body:"query GetDbSchemaList{\n  allSchemata(\n    orderBy: SCHEMA_NAME_ASC\n  )\n  {\n    nodes {\n      id\n      schemaName\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,t)}),e.definitions&&e.definitions.forEach(function(e){a(e,t)})}var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}function r(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,r=new Set,l=new Set;a.forEach(function(e){l.add(e)});while(l.size>0){var c=l;l=new Set,c.forEach(function(e){if(!r.has(e)){r.add(e);var t=i[e]||new Set;t.forEach(function(e){l.add(e)})}})}return r.forEach(function(t){var a=o(e,t);a&&n.definitions.push(a)}),n}(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})})(),e.exports=n,e.exports["GetDbSchemaList"]=r(n,"GetDbSchemaList")},a789:function(e,t,n){"use strict";var a=n("3b45"),i=n.n(a);i.a},ab3b:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SearchFunctions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"searchTerm"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchFunctions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"searchTerm"},value:{kind:"Variable",name:{kind:"Name",value:"searchTerm"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resultDataType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"argumentDataTypes"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"definition"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:201}};n.loc.source={body:"mutation SearchFunctions(\n  $searchTerm: String!\n){\n  searchFunctions(searchTerm: $searchTerm) {\n    id\n    functionName\n    functionSchema\n    resultDataType\n    argumentDataTypes\n    definition\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,t)}),e.definitions&&e.definitions.forEach(function(e){a(e,t)})}var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}function r(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,r=new Set,l=new Set;a.forEach(function(e){l.add(e)});while(l.size>0){var c=l;l=new Set,c.forEach(function(e){if(!r.has(e)){r.add(e);var t=i[e]||new Set;t.forEach(function(e){l.add(e)})}})}return r.forEach(function(t){var a=o(e,t);a&&n.definitions.push(a)}),n}(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})})(),e.exports=n,e.exports["SearchFunctions"]=r(n,"SearchFunctions")},b450:function(e,t,n){},b4ca:function(e,t,n){},bd5a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"",width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({staticClass:"text-none",attrs:{dark:"",disabled:e.disabled}},a),[e._v("\n        "+e._s(e.displayValue)+"\n      ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Custom Policy")]),n("v-text-field",{model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{on:{click:e.customizeTablePolicyDefinition}},[e._v("Customize")]),n("v-spacer")],1)],1)],1)],1)},i=[],o=(n("7f7f"),{name:"PolicyCustomizeDialog",props:{currentPolicyDefinition:{type:Object,required:!0},tables:{type:Array,required:!0},bulkCustomize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},mounted:function(){this.customName=this.defaultCustomName},data:function(){return{dialog:!1,customName:"n/a"}},computed:{displayValue:function(){return this.bulkCustomize?"Bulk Customize":"Customize"},defaultCustomName:function(){return 1===this.tables.length?"Custom Policy: ".concat(this.tables[0].tableSchema,".").concat(this.tables[0].name):this.tables.length>1?"New Bulk Policy":"n/a"}},watch:{},methods:{customizeTablePolicyDefinition:function(){this.dialog=!1;var e=this.tables.reduce(function(e,t){return e.concat([t.id])},[]);this.$store.commit("customizeTablePolicy",{sourcePolicyDefinitionId:this.currentPolicyDefinition.id,tableIds:e,newFields:{name:this.customName}})}}}),r=o,l=(n("0134"),n("2877")),c=n("6544"),s=n.n(c),u=n("8336"),d=n("b0af"),m=n("99d9"),f=n("12b2"),p=n("169a"),v=n("9910"),b=n("2677"),h=Object(l["a"])(r,a,i,!1,null,null,null);t["a"]=h.exports;s()(h,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardTitle:f["a"],VDialog:p["a"],VSpacer:v["a"],VTextField:b["a"]})},c2d7:function(e,t,n){"use strict";var a=n("fe5d"),i=n.n(a);i.a},cb8a:function(e,t,n){"use strict";var a=n("3754"),i=n.n(a);i.a},cfbf:function(e,t,n){"use strict";var a=n("015f"),i=n.n(a);i.a},da37:function(e,t,n){},dbdb9:function(e,t,n){"use strict";var a=n("f010"),i=n.n(a);i.a},e002:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},i=[],o=n("75fc"),r=n("cebc"),l=(n("7514"),n("a4bb")),c=n.n(l),s="ALLOWED",u="DENIED",d="IMPLIED",m={name:"TablePolicyEvaluatorCalculator",props:{policyDefinition:{type:Object,required:!0},table:{type:Object,required:!0}},mounted:function(){},data:function(){return{}},computed:{grantStatusColors:function(){return{expected:"green",missing:"yellow",unexpected:"red",extra:"blue"}},tablePolicyEvaluation:function(){var e=this,t=c()(this.policyDefinition.roleGrants).reduce(function(t,n){return c()(e.policyDefinition.roleGrants[n]).reduce(function(t,a){var i=e.policyDefinition.roleGrants[n][a],l=e.table.roleTableGrants.find(function(e){return e.grantee===n&&e.privilegeType===a.toUpperCase()});switch(i){case s:return l?Object(r["a"])({},t,{expected:[].concat(Object(o["a"])(t.expected),[Object(r["a"])({},l,{statusColor:e.grantStatusColors.expected})])}):Object(r["a"])({},t,{missing:[].concat(Object(o["a"])(t.missing),[{roleName:n,expectedRoleAction:i,action:a,statusColor:e.grantStatusColors.missing}])});case u:return l?Object(r["a"])({},t,{unexpected:[].concat(Object(o["a"])(t.unexpected),[Object(r["a"])({},l,{statusColor:e.grantStatusColors.unexpected})])}):t;case d:return l?Object(r["a"])({},t,{extra:[].concat(Object(o["a"])(t.extra),[Object(r["a"])({},l,{statusColor:e.grantStatusColors.extra})])}):t}},t)},{expected:[],missing:[],extra:[],unexpected:[]});return t}},watch:{},methods:{}},f=m,p=(n("9498"),n("2877")),v=Object(p["a"])(f,a,i,!1,null,null,null);t["a"]=v.exports},ee5d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},i=[],o=(n("7f7f"),n("cebc")),r=n("75fc"),l=n("a4bb"),c=n.n(l),s=(n("cadf"),n("551c"),n("f751"),n("097d"),n("9dbb")),u=n.n(s),d="ALLOWED",m="DENIED",f="IMPLIED",p="terse",v={name:"PolicyComputerMixin",computed:{projectRoles:function(){return this.$store.state.projectRoles}},methods:{computePolicy:function(e,t,n,a){var i=c()(e.roleGrants).map(function(e){return{roleName:e}}),l="".concat(i.map(function(e){return e.roleName}).join(", ")),s=c()(e.roleGrants).reduce(function(t,n){var i=c()(e.roleGrants[n]).reduce(function(t,a){return e.roleGrants[n][a]===d?t+1:t},0);console.log("blljweijfw",i);var o=c()(e.roleGrants[n]).map(function(t,o,r){switch(t){case"insert":case"update":var l=e.columnExclusions[t][n]||[],c=l.length>0?"\n        -- excluded columns: ".concat(l.join(", ")):"\n        -- no excluded columns",s=a?"( ".concat(a.tableColumns.map(function(e){return e.columnName}).filter(function(e){return-1===l.indexOf(e)}).join(", ")," )"):"{{grantColumns}}",u=e.columnExclusionOverrides[t].indexOf(n)>-1,m=l.length>0||u?d:e.roleGrants[n][t];return{action:t,value:m,grantColumns:s,columnExclusionsText:c,comma:o<i-1?",":""};default:return{action:t,value:e.roleGrants[n][t],grantColumns:"",comma:o<i-1?",":""}}});return[].concat(Object(r["a"])(t),[{roleName:n,grants:o}])},[]),v=s.map(function(e,t,n){return Object(o["a"])({},e,{grants:e.grants.filter(function(e){return e.value===d})})}).filter(function(e){return e.grants.length>0}),h=s.map(function(e){return Object(o["a"])({},e,{grants:e.grants.filter(function(e){return e.value===m})})}).filter(function(e){return e.grants.length>0}),g=s.map(function(e){return Object(o["a"])({},e,{grants:e.grants.filter(function(e){return e.value===f})})}).filter(function(e){return e.grants.length>0}),y=c()(e.rlsQualifiers).reduce(function(t,n){return t.concat(c()(e.rlsQualifiers[n]).reduce(function(t,a){return[].concat(Object(r["a"])(t),Object(r["a"])(e.rlsQualifiers[n][a].policies.map(function(e){return Object(o["a"])({},e,{action:a,roleName:n})})))},[]))},[]),k={verbose:!0,deniedRoleGrants:h,impliedRoleGrants:g},N=Object(o["a"])({},n,{policyName:e.name,enableRls:e.enableRls,allowedRoleGrants:v,rlsPolicies:y,revokeRolesList:l}),_=t===p?N:Object(o["a"])({},k,N);return u.a.render(b,_)}}},b="\n----------\n----------  BEGIN TABLE POLICY: {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}}\n----------  POLICY NAME:  {{policyName}}\n----------\n\n----------  REMOVE EXISTING TABLE GRANTS\n\n  revoke all privileges \n  on table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} \n  from public;\n\n  revoke all privileges \n  on table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} \n  from {{revokeRolesList}};\n\n{{#enableRls}}\n----------  ENABLE ROW LEVEL SECURITY\n\n  alter table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} enable row level security;\n\n{{#rlsPolicies}}\n  create policy {{name}}_{{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}_{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} \n    on {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}}\n    as {{passStrategy}}\n    for {{action}}\n    to {{roleName}}\n    using {{{using}}}\n    {{#withCheck}}\n    with check {{withCheck}}\n    {{/withCheck}}\n    ;\n{{/rlsPolicies}}\n\n{{/enableRls}}\n{{^enableRls}}\n----------  DISABLE ROW LEVEL SECURITY\n\n  alter table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} disable row level security;\n{{/enableRls}}\n\n----------  CREATE NEW TABLE GRANTS\n{{#allowedRoleGrants}}\n\n----------  {{roleName}}\n  grant \n  {{#grants}}\n    {{action}} {{grantColumns}}{{comma}} {{columnExclusionsText}}\n  {{/grants}}\n  on table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} \n  to {{roleName}};\n\n{{/allowedRoleGrants}}\n\n{{#verbose}}\n----------  IMPLIED TABLE GRANTS\n  {{#impliedRoleGrants}}\n\n  ----------  {{roleName}}\n  {{#grants}}\n  --IMPLIED:   grant {{action}} on table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} to {{roleName}};\n  {{/grants}}\n  {{/impliedRoleGrants}}\n\n  ----------  DENIED TABLE GRANTS\n  {{#deniedRoleGrants}}\n\n  ----------  {{roleName}}\n  {{#grants}}\n  --DENIED:   grant {{action}} on table {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}} to {{roleName}};\n  {{/grants}}\n  {{/deniedRoleGrants}}\n{{/verbose}}\n\n----------  END TABLE POLICY: {{schemaName}}{{^schemaName}}{{=<% %>=}}{{schemaName}}<%={{ }}=%>{{/schemaName}}.{{tableName}}{{^tableName}}{{=<% %>=}}{{tableName}}<%={{ }}=%>{{/tableName}}\n--==",h=v,g=n("2877"),y=Object(g["a"])(h,a,i,!1,null,null,null);t["a"]=y.exports},f010:function(e,t,n){},f72c:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetDbSchemaTreeBySchemaName"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schemaNames"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SqlIdentifier"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allSchemata"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"schemaName"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"in"},value:{kind:"Variable",name:{kind:"Name",value:"schemaNames"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaTables"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableColumns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dataType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"indices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"indexName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"referentialConstraints"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"constraintSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniqueConstraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uniqueConstraintSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"matchOption"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateRule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleteRule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"referencingColumnUsage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positionInUniqueConstraint"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"referencedColumnUsage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"constraintName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"columnName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positionInUniqueConstraint"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"roleTableGrants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"grantor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"grantee"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tableSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"privilegeType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isGrantable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"withHierarchy"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"schemaFunctions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"functionName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"functionSchema"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schemaEnums"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"enumName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enumSchema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enumValues"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:1546}};n.loc.source={body:"query GetDbSchemaTreeBySchemaName($schemaNames: [SqlIdentifier!]){\n  allSchemata\n  (\n    filter: {\n      schemaName: {\n        in: $schemaNames\n      }\n    }\n  ) \n  {\n    nodes {\n      id\n      schemaName\n      schemaTables {\n        id\n        name: tableName\n        tableSchema\n        tableColumns {\n          tableName\n          tableSchema\n          columnName\n          dataType\n        }\n        indices {\n          tableName\n          tableSchema\n          columnName\n          indexName\n        }\n        referentialConstraints {\n          constraintName\n          constraintSchema\n          uniqueConstraintName\n          uniqueConstraintSchema\n          matchOption\n          updateRule\n          deleteRule\n          referencingColumnUsage {\n            constraintName\n            tableSchema\n            tableName\n            columnName\n            ordinalPosition\n            positionInUniqueConstraint\n          }\n          referencedColumnUsage {\n            constraintName\n            tableSchema\n            tableName\n            columnName\n            ordinalPosition\n            positionInUniqueConstraint\n          }\n        }\n        roleTableGrants {\n          grantor\n          grantee\n          tableName\n          tableSchema\n          privilegeType\n          isGrantable\n          withHierarchy\n        }\n      }\n      schemaFunctions {\n        id\n        name: functionName\n        functionSchema\n      }\n      schemaEnums {\n        id\n        name: enumName\n        enumSchema\n        enumValues\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(e){a(e,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(e){a(e,t)}),e.definitions&&e.definitions.forEach(function(e){a(e,t)})}var i={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}function r(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,r=new Set,l=new Set;a.forEach(function(e){l.add(e)});while(l.size>0){var c=l;l=new Set,c.forEach(function(e){if(!r.has(e)){r.add(e);var t=i[e]||new Set;t.forEach(function(e){l.add(e)})}})}return r.forEach(function(t){var a=o(e,t);a&&n.definitions.push(a)}),n}(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}})})(),e.exports=n,e.exports["GetDbSchemaTreeBySchemaName"]=r(n,"GetDbSchemaTreeBySchemaName")},fb68:function(e,t,n){"use strict";var a=n("90d0"),i=n.n(a);i.a},fe5d:function(e,t,n){}});
//# sourceMappingURL=app.fd6e25e8.js.map